import{u as te,m as x,_ as le,U as Y,s as R,a as L,r as re,d as ue}from"./index.c2c56019.js";import{_ as F,ag as Z,c as V,ah as de,ai as ce,u as _e,l as ve}from"./BaseButton.9d2b7ab7.js";import{_ as ee,a as me}from"./SectionTitleLineWithButton.c766808a.js";import{_ as G}from"./CardBox.999a807f.js";import{_ as A,C as he,a as be}from"./LayoutAuthenticated.8f3f2ea5.js";import{L as pe,_ as J}from"./LoadingOverlay.7858e5ce.js";import{_ as S}from"./BaseButtons.06021fb9.js";import{r as h,f as g,w as K,q as Q,x as o,y as n,F as t,z as e,u as i,H as M,M as T,G as P,K as j,A as u,J as _,C as oe,a as fe,P as w}from"./vue.7e7f5872.js";import{c as C,r as I,n as ae,u as ke,g as D}from"./validators.2340ccfd.js";import{C as ge}from"./CardBoxComponentEmpty.b6fc60cc.js";import{_ as we}from"./FormField.60e93e5c.js";import"./vendor.4c47bd8f.js";import"./SnackBar.ecb549af.js";const je={key:0},$e=e("th",null,null,-1),ze=e("th",null,"Naziv",-1),Ce=e("th",null,"Web mjesto",-1),Ve=e("th",null,null,-1),xe=[$e,ze,Ce,Ve],Me={key:1},Pe=e("th",null,null,-1),Be=e("th",null,"Naziv",-1),Ne=e("th",null,"Web mjesto",-1),Ue=e("th",null,"Direktor",-1),Ae=e("th",null,"Mati\u010Dni broj",-1),ye=e("th",null,"OIB",-1),Oe=e("th",null,"Adresa",-1),Ie=e("th",null,null,-1),De=[Pe,Be,Ne,Ue,Ae,ye,Oe,Ie],Le={key:0},Fe={key:1,class:"border-b-0 lg:w-6 before:hidden"},Se={key:2},Te={"data-label":"Naziv"},We={"data-label":"Web mjesto"},Ee=["href"],qe={class:"before:hidden lg:w-1 whitespace-nowrap"},Re={key:1},He={key:1,class:"border-b-0 lg:w-6 before:hidden"},Ge={key:2},Je={"data-label":"Naziv"},Ke={"data-label":"Web mjesto"},Qe=["href"],Xe={"data-label":"Direktor"},Ye={"data-label":"Mati\u010Dni broj"},Ze={"data-label":"OIB"},ea={"data-label":"Adresa"},aa={class:"before:hidden lg:w-1 whitespace-nowrap"},ta={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},la={__name:"TableCompanies",props:{checkable:Boolean},setup(y){const v=h(5),b=h(0),B=g(()=>p.value.slice(v.value*b.value,v.value*(b.value+1))),$=g(()=>Math.ceil(p.value.length/v.value)),N=g(()=>b.value+1),s=g(()=>{const r=[];for(let k=0;k<$.value;k++)r.push(k);return r}),p=h([]);let W=h("");const O=te();async function z(){const r=O.params.naziv;let k=await x.fetchCompanies();p.value=k.data.results,r&&(W.value=r,b.value=E(r))}function E(r){const k=p.value.findIndex(l=>l.naziv===r);return k===-1?0:Math.floor(k/v.value)}K(()=>O.params.naziv,z,{immediate:!0}),Q(async()=>{let r=await x.fetchCompanies();p.value=r.data.results});const f=r=>{window.open(r,"_blank")};return(r,k)=>(o(),n(M,null,[t(pe,{"is-active":!p.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]),e("table",null,[e("thead",null,[i(x).userAdmin?(o(),n("tr",Me,De)):(o(),n("tr",je,xe))]),i(x).userAdmin?(o(),n("tbody",Re,[(o(!0),n(M,null,T(B.value,l=>(o(),n("tr",{key:l.naziv,class:oe({"selected-row":i(W)===l.naziv})},[y.checkable?(o(),P(J,{key:0,"assignment-data":l},null,8,["assignment-data"])):j("",!0),l.logo[0]?(o(),n("td",He,[t(A,{avatar:l.logo[0].url,class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"},null,8,["avatar"])])):(o(),n("td",Ge,[t(A,{avatar:"No-Logo.png",class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"})])),e("td",Je,u(l.naziv),1),e("td",Ke,[e("a",{class:"underline",href:l.web,target:"_blank"},u(l.web),9,Qe)]),e("td",Xe,u(l.direktor),1),e("td",Ye,u(l.maticni_broj),1),e("td",Ze,u(l.OIB),1),e("td",ea,u(l.adresa),1),e("td",aa,[t(S,{type:"justify-start lg:justify-end","no-wrap":""},{default:_(()=>[t(F,{color:"fipu_blue",icon:i(Z),small:"",onClick:q=>f(l.web)},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])):(o(),n("tbody",Le,[(o(!0),n(M,null,T(B.value,l=>(o(),n("tr",{key:l.naziv},[y.checkable?(o(),P(J,{key:0,"assignment-data":l},null,8,["assignment-data"])):j("",!0),l.logo[0]?(o(),n("td",Fe,[t(A,{avatar:l.logo[0].url,class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"},null,8,["avatar"])])):(o(),n("td",Se,[t(A,{avatar:"No-Logo.png",class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"})])),e("td",Te,u(l.naziv),1),e("td",We,[e("a",{class:"underline",href:l.web,target:"_blank"},u(l.web),9,Ee)]),e("td",qe,[t(S,{type:"justify-start lg:justify-end","no-wrap":""},{default:_(()=>[t(F,{color:"fipu_blue",icon:i(Z),small:"",onClick:q=>f(l.web)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))]))]),e("div",ta,[t(le,null,{default:_(()=>[t(S,null,{default:_(()=>[(o(!0),n(M,null,T(s.value,l=>(o(),P(F,{key:l,active:l===b.value,label:l+1,color:l===b.value?"lightDark":"whiteDark",small:"",onClick:q=>b.value=l},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+u(N.value)+" od "+u($.value),1)]),_:1})])],64))}},oa={key:0},sa=e("thead",null,[e("tr",null,[e("th"),e("th",null,"Naziv"),e("th",null,"Web mjesto"),e("th",null,"Direktor"),e("th",null,"Mati\u010Dni broj"),e("th",null,"OIB"),e("th",null,"Adresa"),e("th")])],-1),na={key:1,class:"border-b-0 lg:w-6 before:hidden"},ia={key:2},ra={"data-label":"Naziv"},ua={"data-label":"Web mjesto"},da={"data-label":"Direktor"},ca={"data-label":"Mati\u010Dni broj"},_a={"data-label":"OIB"},va={"data-label":"Adresa"},ma={class:"before:hidden lg:w-1 whitespace-nowrap"},ha={class:"mb-4"},ba={key:0},pa=e("strong",null,"Naziv:",-1),fa=e("br",null,null,-1),ka=e("strong",null,"Web mjesto:",-1),ga=e("br",null,null,-1),wa=e("strong",null,"Direktor:",-1),ja=e("br",null,null,-1),$a=e("strong",null,"Mati\u010Dni broj:",-1),za=e("br",null,null,-1),Ca=e("strong",null,"OIB:",-1),Va=e("br",null,null,-1),xa=e("strong",null,"Adresa:",-1),Ma=e("br",null,null,-1),Pa=e("br",null,null,-1),Ba=e("hr",null,null,-1),Na={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Ua={__name:"TableNewCompanies",props:{checkable:Boolean},setup(y){const v=h([]),b={web:{required:C.withMessage("Polje je obavezno",I)},direktor:{required:C.withMessage("Polje je obavezno",I)},maticni_broj:{required:C.withMessage("Polje je obavezno",I),numeric:C.withMessage("Polje smije sadr\u017Eavati samo brojeve",ae)},OIB:{required:C.withMessage("Polje je obavezno",I),numeric:C.withMessage("Polje smije sadr\u017Eavati samo brojeve",ae)},adresa:{required:C.withMessage("Polje je obavezno",I)}};let B=h("");const $=te();async function N(){const d=$.params.naziv;d&&(B.value=d)}K(()=>$.params.naziv,N,{immediate:!0});const s=h({});Q(async()=>{const c=(await x.fetchCompanies()).data.results.filter(a=>(a.web===""||a.web===null)&&(a.OIB===""||a.OIB===null)&&(a.adresa===""||a.adresa===null)&&(a.maticni_broj===""||a.maticni_broj===null)&&(a.direktor===""||a.direktor===null));Y.isArrayEmpty(c)?(R.pushMessage("Nema novih poduze\u0107a","info"),L.newCompaniesFound=!1):(R.pushMessage("Prona\u0111ena su nova poduze\u0107a, molimo a\u017Eurirajte podatke","info"),L.newCompaniesFound=!0);for(const a of c)s.value[a.id]={naziv:a.naziv,web:a.web,direktor:a.direktor||"",maticni_broj:a.maticni_broj||"",OIB:a.OIB||"",adresa:a.adresa||""};v.value=c});const p=fe({}),W=g(()=>{const d={};for(const c of v.value)d[c.id]=s.value[c.id];return d}),O=()=>{for(const d of v.value)p[d.id]=b};Q(O),K(v,O);const z=ke(p,W),E=h(!1),f=h(null),r=h({isActive:!1});function k(d){f.value=d,r.value.isActive=!0}function l(){q(),r.value.isActive=!1}async function q(){if(E.value=!0,!await z.value.$validate()){E.value=!1;return}const c=s.value[f.value];L.saveUpdatedCompany(c)?(R.pushMessage("Podaci su uspje\u0161no a\u017Eurirani","success"),await Y.wait(1),location.reload()):R.pushMessage("Podaci nisu a\u017Eurirani","error")}const H=h(5),U=h(0),se=g(()=>v.value.slice(H.value*U.value,H.value*(U.value+1))),X=g(()=>Math.ceil(v.value.length/H.value)),ne=g(()=>U.value+1),ie=g(()=>{const d=[];for(let c=0;c<X.value;c++)d.push(c);return d});return(d,c)=>(o(),n(M,null,[i(L).newCompaniesFound?(o(),n("table",oa,[sa,e("tbody",null,[(o(!0),n(M,null,T(se.value,a=>(o(),n("tr",{key:a.naziv,class:oe({"selected-row":i(B)===a.naziv})},[y.checkable?(o(),P(J,{key:0,"assignment-data":a},null,8,["assignment-data"])):j("",!0),a.logo[0]?(o(),n("td",na,[t(A,{avatar:a.logo[0].url,class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"},null,8,["avatar"])])):(o(),n("td",ia,[t(A,{avatar:"No-Logo.png",class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"})])),e("td",ra,[t(V,{modelValue:s.value[a.id].naziv,"onUpdate:modelValue":m=>s.value[a.id].naziv=m,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ua,[t(V,{modelValue:s.value[a.id].web,"onUpdate:modelValue":m=>s.value[a.id].web=m,error:i(D)(i(z),"web")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",da,[t(V,{modelValue:s.value[a.id].direktor,"onUpdate:modelValue":m=>s.value[a.id].direktor=m,error:i(D)(i(z),"direktor")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",ca,[t(V,{modelValue:s.value[a.id].maticni_broj,"onUpdate:modelValue":m=>s.value[a.id].maticni_broj=m,error:i(D)(i(z),"maticni_broj")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",_a,[t(V,{modelValue:s.value[a.id].OIB,"onUpdate:modelValue":m=>s.value[a.id].OIB=m,error:i(D)(i(z),"OIB")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",va,[t(V,{modelValue:s.value[a.id].adresa,"onUpdate:modelValue":m=>s.value[a.id].adresa=m,error:i(D)(i(z),"adresa")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",ma,[t(S,{type:"justify-start lg:justify-end","no-wrap":""},{default:_(()=>[t(F,{color:"fipu_blue",icon:i(de),small:"",onClick:m=>k(a.id)},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])])):j("",!0),t(he,{modelValue:r.value.isActive,"onUpdate:modelValue":c[0]||(c[0]=a=>r.value.isActive=a),title:"Potvrda akcije","button-label":"A\u017Euriraj","has-cancel":"",onConfirm:l},{default:_(()=>[e("div",ha,[f.value?(o(),n("div",ba,[pa,w(" "+u(s.value[f.value].naziv),1),fa,ka,w(" "+u(s.value[f.value].web),1),ga,wa,w(" "+u(s.value[f.value].direktor),1),ja,$a,w(" "+u(s.value[f.value].maticni_broj),1),za,Ca,w(" "+u(s.value[f.value].OIB),1),Va,xa,w(" "+u(s.value[f.value].adresa),1),Ma])):j("",!0),Pa,Ba,w(" Molimo provjerite unos te nakon toga potvrdite. ")])]),_:1},8,["modelValue"]),e("div",Na,[t(le,null,{default:_(()=>[t(S,null,{default:_(()=>[(o(!0),n(M,null,T(ie.value,a=>(o(),P(F,{key:a,active:a===U.value,label:a+1,color:a===U.value?"lightDark":"whiteDark",small:"",onClick:m=>U.value=a},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+u(ne.value)+" od "+u(X.value),1)]),_:1})])],64))}},Aa={key:0},ya=e("p",{class:"mb-4"},"U tablici se nalaze poduze\u0107a koja su prijavili zadatke za izvo\u0111enje prakse me\u0111utim jo\u0161 nisu registrirani za provo\u0111enje - potrebno je ru\u010Dno unijeti podatke o poduze\u0107u.",-1),Oa=e("p",{class:"mb-4"},"U tablici se nalaze poduze\u0107a koja su registrirana za provo\u0111enje studentske prakse u suradnji s Fakultetom informatike u Puli.",-1),Ia={key:1,class:"mb-4"},Da=e("p",{class:"text-sm md:text-base mb-2"},"Ukoliko ne mo\u017Eete na\u0107i zadatak koji vam se svi\u0111a, javite se poslodavcu, predstavite se i zamolite ih da ispune zadatak putem poveznice ispod.",-1),La={class:"flex flex-wrap items-center text-sm md:text-base"},Ya={__name:"CompaniesView",setup(y){const v=g(()=>x.userAuthenticated),b=g(()=>x.userAdmin),$=h("http://localhost:5173/poslodavci/novi-zadatak");return(N,s)=>(o(),n("div",null,[v.value?(o(),P(be,{key:0},{default:_(()=>[t(me,null,{default:_(()=>[b.value?(o(),n("div",Aa,[t(ee,{icon:i(ce),title:"Novi poslodavci",main:""},null,8,["icon"]),ya,t(G,{"has-table":""},{default:_(()=>[t(Ua)]),_:1}),i(L).newCompaniesFound?j("",!0):(o(),P(G,{key:0},{default:_(()=>[t(ge)]),_:1}))])):j("",!0),t(ee,{class:"mt-4",icon:i(_e),title:"Svi poslodavci",main:""},null,8,["icon"]),Oa,b.value?j("",!0):(o(),n("div",Ia,[Da,t(we,{class:"md:w-1/2",label:"Forma za prijavu novog zadatka"},{default:_(()=>[t(V,{modelValue:$.value,"onUpdate:modelValue":s[0]||(s[0]=p=>$.value=p),"icon-left":N.mdiClipboardCheck,"icon-right":N.mdiContentCopy,name:"addNewAssignmentLink",readonly:"",copyable:""},null,8,["modelValue","icon-left","icon-right"])]),_:1}),e("p",La,[w(" Nakon \u0161to poslodavac ispuni zadatak, prijavite ga u "),e("span",{class:"text-fipu_blue cursor-pointer inline-flex items-center md:ml-1 whitespace-normal",onClick:s[1]||(s[1]=p=>i(re).push("/moja-praksa"))},[t(ue,{path:i(ve),class:"flex-none align-middle",size:18},null,8,["path"]),w(" Moja praksa ")])])])),t(G,{"has-table":""},{default:_(()=>[t(la)]),_:1})]),_:1})]),_:1})):j("",!0)]))}};export{Ya as default};
