import{r as u,q as O,x as s,y as i,G as b,J as F,F as h,K as f,z as t,H as V,M as T,C as D,A as p,u as z,f as w,Y as x,a as A,w as g,P as M,Q as B}from"./vue.20f6a325.js";import{_ as L}from"./CardBox.65ca0edd.js";import{_ as P}from"./FormField.ad11e906.js";import{_ as N}from"./FormCheckRadioGroup.ce049d98.js";import{_ as U,m as E}from"./BaseButton.2cef5f39.js";import{C as I}from"./LayoutAuthenticated.3cd3089a.js";import{_ as K}from"./BaseButtons.44748d19.js";import{L as R}from"./LoadingOverlay.e2ef850a.js";import{a as W}from"./TableAvailableAssignments.df39d701.js";import{a as S}from"./index.4853f032.js";const Z=t("br",null,null,-1),q={key:2},G=t("thead",{class:"text-sm"},[t("tr",null,[t("th",null,"Odabir"),t("th",null,"ID Zadatka"),t("th",null,"Kontakt email"),t("th",null,"Lokacija"),t("th")])],-1),H={class:"text-sm"},J=["onClick"],Q={"data-label":"Odabir"},Y={"data-label":"ID Zadatka"},X={"data-label":"Kontakt email"},ee={"data-label":"Lokacija"},ae={class:"before:hidden lg:w-1 whitespace-nowrap"},$={__name:"TableStudentPreferences",props:{checkable:Boolean},emits:["rowSelected"],setup(m,{emit:d}){const l=u(null),c=u([]),o=u({}),v=u({}),y=u({}),k=u(null),n=u([]),C=e=>{k.value=e.id_zadatak,d("rowSelected",e.id_zadatak)};return O(async()=>{c.value=await S.getPreferencesDetailed(S.selectedStudent.process_instance_data.variables.id_preferencije),o.value=c.value.Prvi_odabir[0].details,v.value=c.value.Drugi_odabir[0].details,y.value=c.value.Treci_odabir[0].details,n.value=[o.value,v.value,y.value]}),(e,r)=>(s(),i(V,null,[l.value?(s(),b(I,{key:0,modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=a=>l.value=a),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:r[1]||(r[1]=a=>e.mainStore.activateLogoutModal(!1))},{default:F(()=>[h(W,{data:l.value},null,8,["data"]),Z]),_:1},8,["modelValue"])):f("",!0),n.value.length?(s(),i("table",q,[G,t("tbody",H,[(s(!0),i(V,null,T(n.value,(a,_)=>(s(),i("tr",{key:a.id_zadatak,class:D({"selected-row":k.value===a.id_zadatak,"cursor-pointer":!0}),onClick:j=>C(a)},[t("td",Q,p(_+1),1),t("td",Y,p(a.id_zadatak),1),t("td",X,p(a.poslodavac_email),1),t("td",ee,p(a.lokacija),1),t("td",ae,[h(K,{type:"justify-start lg:justify-end","no-wrap":""},{default:F(()=>[h(U,{color:"fipu_blue",icon:z(E),small:"",onClick:j=>l.value=a},null,8,["icon","onClick"])]),_:2},1024)])],10,J))),128))])])):(s(),b(R,{key:1,"is-active":!n.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]))],64))}},te={__name:"TaskTable",props:{data:{type:String,required:!0}},setup(m){const d=m,l=w(()=>(d.data=="userPreferences",$));return(c,o)=>(s(),b(x(l.value)))}},le={class:"mb-2"},oe={key:3,class:"mt-2 mb-4"},be={__name:"FormDynamic",props:{formFields:{type:Object,default:()=>{}},variables:{type:Object,default:()=>{}},documentation:{type:String,default:null}},emits:["update:modelValue","allFieldsFilled"],setup(m,{emit:d}){const l=m,c=te,o=A(Object.fromEntries(Object.keys(l.formFields).map(e=>[e,null])));O(()=>{for(const e in l.formFields)l.formFields[e].type==="var-string"&&l.variables[e]!==void 0&&(o[e]=l.variables[e])});const v=e=>{o.Alocirani_zadatak=e},y=e=>{const r=e.match(/selectFromTable-["']?([^"']+)["']?/);if(r)return r[1]},k=w(()=>Object.keys(o).every(e=>{const r=l.formFields[e],a=r.type==="yes-no-boolean"||r.type.startsWith("selectFromTable")&&n.value||r.type==="var-string";return!a||a&&o[e]!==null}));g(k,e=>{d("allFieldsFilled",e)});const n=w(()=>o.odabir_prihvacen!=="false");g(o,(e,r)=>{d("update:modelValue",e)},{deep:!0});const C=()=>{d("update:modelValue",o)};return(e,r)=>(s(),b(L,{"is-form":"","vertical-centered":"",onSubmit:B(C,["prevent"])},{default:F(()=>[t("div",le,p(m.documentation),1),(s(!0),i(V,null,T(m.formFields,(a,_)=>(s(),i("div",{key:_},[a.type==="yes-no-boolean"?(s(),b(P,{key:0,label:a.label},{default:F(()=>[h(N,{modelValue:o[_],"onUpdate:modelValue":j=>o[_]=j,name:_,type:"radio",options:{true:"Da",false:"Ne"}},null,8,["modelValue","onUpdate:modelValue","name"])]),_:2},1032,["label"])):f("",!0),a.type==="var-string"?(s(),i(V,{key:1},[],64)):f("",!0),a.type.startsWith("selectFromTable")&&n.value?(s(),b(x(z(c)),{key:2,data:y(a.type),onRowSelected:v},null,40,["data"])):f("",!0),a.type.startsWith("selectFromTable")&&n.value?(s(),i("p",oe,[M(" Odabrali ste: "),t("b",null,p(o.Alocirani_zadatak),1)])):f("",!0)]))),128))]),_:1},8,["onSubmit"]))}};export{be as _};
