import{m as b,d as Z,v as J,o as R,e as f,u as X,a as A,_ as Y}from"./index.6d481dc4.js";import{r as m,f as v,q as U,x as i,y as u,z as t,A as s,u as _,N as C,K as c,G as y,C as $,w as P,F as p,J as z,H as S,M as T}from"./vue.f9cfebed.js";import{_ as F,m as Q}from"./BaseButton.daf134ea.js";import{C as W,_ as tt}from"./LayoutAuthenticated.3537eb8e.js";import{L as et,_ as at}from"./LoadingOverlay.cdc2bcba.js";import{_ as V}from"./BaseButtons.e0ebdabe.js";const lt={class:"relative block overflow-hidden rounded-lg pb-4"},st={class:"sm:flex sm:justify-between sm:gap-4"},ot={class:"text-lg font-bold sm:text-2xl"},nt={class:"text-lg font-bold sm:text-xl"},it={class:"mt-1 text-xs font-medium text-gray-600 dark:text-gray-200"},rt={class:"hidden sm:block sm:shrink-0"},dt=["src"],ut={class:"max-w-[40ch] text-sm text-gray-500 dark:text-gray-300"},ct={class:"mt-4"},mt={class:"max-w-[40ch] text-sm text-gray-500 dark:text-gray-300"},_t={class:"max-w-[40ch] text-sm text-gray-500 dark:text-gray-300"},vt={class:"max-w-[40ch] text-sm text-gray-500 dark:text-gray-300"},gt={class:"mt-6 flex gap-4 sm:gap-6"},xt={class:"flex flex-col-reverse"},ft={class:"text-xs text-gray-500 dark:text-gray-100"},pt={class:"flex flex-col-reverse"},bt={class:"text-xs text-gray-500 dark:text-gray-100"},kt={class:"flex flex-col-reverse"},ht={class:"text-xs text-gray-500 dark:text-gray-100"},yt={key:0,class:"flex flex-col-reverse"},jt={class:"text-xs text-gray-500 dark:text-gray-100"},wt={key:1,class:"flex flex-col-reverse"},At={class:"text-xs text-gray-500 dark:text-gray-100"},zt={__name:"CardBoxAllocation",props:{data:{type:Object,required:!0}},setup(r){const l=r;let d=m("");const j=v(()=>l.data.opis_zadatka.length>50?l.data.opis_zadatka.substring(0,50)+"...":l.data.opis_zadatka);return U(async()=>{let k=await b.fetchCompanies(l.data.Poslodavac[0].value);d.value=k.data.results[0].logo[0].url}),(k,n)=>(i(),u("div",lt,[n[8]||(n[8]=t("span",{class:"absolute inset-x-0 bottom-0 h-2 bg-gradient-to-r from-green-300 via-fipu_blue to-blue-500"},null,-1)),t("div",st,[t("div",null,[t("h1",ot,s(l.data.id_zadatak),1),t("h3",nt,s(j.value),1),t("p",it,s(l.data.Poslodavac[0].value)+": "+s(l.data.poslodavac_email),1)]),t("div",rt,[t("img",{alt:"logo",src:_(d),class:"h-24 w-24 object-cover shadow-sm rounded-full block max-w-full bg-gray-100 dark:bg-slate-800"},null,8,dt)])]),t("div",null,[t("p",ut,s(l.data.opis_zadatka),1)]),t("div",ct,[t("p",mt,[n[0]||(n[0]=t("b",null,"Potrebno imati:",-1)),C(" "+s(l.data.potrebno_imati),1)]),t("p",_t,[n[1]||(n[1]=t("b",null,"Preferencije za studenta:",-1)),C(" "+s(l.data.preferencije_za_studenta),1)]),t("p",vt,[n[2]||(n[2]=t("b",null,"Napomena:",-1)),C(" "+s(l.data.napomena||"Nema napomene."),1)])]),t("dl",gt,[t("div",xt,[n[3]||(n[3]=t("dt",{class:"text-sm font-medium text-gray-600 dark:text-gray-200"},"Okviran po\u010Detak",-1)),t("dd",ft,s(l.data.zeljeno_okvirno_vrijeme_pocetka),1)]),t("div",pt,[n[4]||(n[4]=t("dt",{class:"text-sm font-medium text-gray-600 dark:text-gray-200"},"Lokacija",-1)),t("dd",bt,s(l.data.lokacija),1)]),t("div",kt,[n[5]||(n[5]=t("dt",{class:"text-sm font-medium text-gray-600 dark:text-gray-200"},"Trajanje",-1)),t("dd",ht,s(l.data.trajanje_sati)+" sati",1)]),l.data.selekcija===!0?(i(),u("div",yt,[n[6]||(n[6]=t("dt",{class:"text-sm font-medium text-gray-600 dark:text-gray-200"},"Selekcija",-1)),t("dd",jt,s(l.data.proces_selekcije),1)])):c("",!0),l.data.angazman_fipu!=="Ne"||l.data.angazman_fipu===""?(i(),u("div",wt,[n[7]||(n[7]=t("dt",{class:"text-sm font-medium text-gray-600 dark:text-gray-200"},"FIPU Anga\u017Eman",-1)),t("dd",At,s(l.data.angazman_fipu),1)])):c("",!0)])]))}},$t={class:"drop-shadow truncate whitespace-nowrap text-center max-w-[128px]"},Ct=["title"],Pt={__name:"PillTagPlain",props:{label:{type:String,required:!0},icon:{type:String,default:null},small:Boolean},setup(r){return(l,d)=>(i(),u("div",{class:$(["inline-flex items-center capitalize hover:bg-opacity-80",[r.small?"text-xs hover:bg":"text-sm  py-0.5 px-3 sm:px-3"]])},[r.icon?(i(),y(Z,{key:0,path:r.icon,h:"h-4",w:"w-4",class:$(r.small?"mr-1":"mr-2"),size:r.small?14:null},null,8,["path","class","size"])):c("",!0),t("span",$t,[t("abbr",{class:"no-underline",title:r.label},s(r.label),9,Ct)])],2))}},Xt={__name:"PillTag",props:{label:{type:String,required:!0},color:{type:String,required:!0},icon:{type:String,default:null},small:Boolean,outline:Boolean},setup(r){const l=r,d=v(()=>[l.small?"py-1 px-3":"py-0.5 px-4 m-1",l.outline?J[l.color]:R[l.color]]);return(j,k)=>(i(),y(Pt,{class:$(["border rounded-full",d.value]),icon:r.icon,label:r.label,small:r.small},null,8,["class","icon","label","small"]))}},St={key:0},Lt={key:1},Mt={key:2},Nt={class:"border-b-0 lg:w-6 before:hidden"},Bt={"data-label":"id_zadatak"},Dt={"data-label":"Kontakt email"},Tt={"data-label":"Preferirane tehnologije"},Ft={"data-label":"Trajanje (sati)"},Vt={"data-label":"Lokacija"},qt={key:1,"data-label":"Max. studenata"},Ut={key:2,"data-label":"Dostupno mjesta"},Et={class:"before:hidden lg:w-1 whitespace-nowrap"},It={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},q=3,Yt={__name:"TableAvailableAssignments",props:{checkable:Boolean},setup(r){const l=m(5),d=m(0),j=v(()=>g.value.slice(l.value*d.value,l.value*(d.value+1))),k=v(()=>Math.ceil(g.value.length/l.value)),n=v(()=>d.value+1),E=v(()=>{const o=[];for(let e=0;e<k.value;e++)o.push(e);return o}),h=m(null),g=m([]),L=m([]);let w=v(()=>f.checkedAssignments),M=m("");const N=X();async function I(){const o=N.params.id_zadatak,e=await f.fetchAvailableAssignments();g.value=e.filter(x=>(A.availableAssignmentsFilter?x.dostupno_mjesta>0:x.dostupno_mjesta>=0)&&x.voditelj_odobrio.value=="odobreno"),o&&(M.value=o,d.value=K(o));let a=await b.fetchCompanies();L.value=a.data.results}P(()=>N.params.id_zadatak,I,{immediate:!0}),U(async()=>{const o=await f.fetchAvailableAssignments();g.value=o.filter(e=>(A.availableAssignmentsFilter?e.dostupno_mjesta>0:e.dostupno_mjesta>=0)&&e.voditelj_odobrio.value=="odobreno"),f.resetAssignments()});const O=o=>{const e=L.value.find(a=>a.naziv===o.Poslodavac[0].value);return e&&e.logo&&e.logo[0]&&e.logo[0].url?e.logo[0].url:"No-Logo.png"};function K(o){const e=g.value.findIndex(a=>a.id_zadatak===o);return e===-1?0:Math.floor(e/l.value)}const B=m({}),G=v(()=>w.value.length>=q);P(w,o=>{o.forEach(e=>{B.value[e.id_zadatak]=!1})}),P(()=>A.availableAssignmentsFilter,async()=>{const o=await f.fetchAvailableAssignments();g.value=o.filter(e=>(A.availableAssignmentsFilter?e.dostupno_mjesta>0:e.dostupno_mjesta>=0)&&e.voditelj_odobrio.value=="odobreno")},{immediate:!0});const D=o=>w.value.some(e=>e.id_zadatak===o.id_zadatak),H=(o,e)=>{if(o){if(w.value.length>=q){alert("You can only select a maximum of 3 assignments."),B[e.id_zadatak]=!1;return}f.addAssignment(e)}else f.removeAssignment(e)};return(o,e)=>(i(),u(S,null,[p(et,{"is-active":!g.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]),h.value?(i(),y(W,{key:0,modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=a=>h.value=a),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:e[1]||(e[1]=a=>_(b).activateLogoutModal(!1))},{default:z(()=>[p(zt,{data:h.value},null,8,["data"]),e[2]||(e[2]=t("br",null,null,-1))]),_:1},8,["modelValue"])):c("",!0),t("table",null,[t("thead",null,[t("tr",null,[r.checkable?(i(),u("th",St)):c("",!0),e[3]||(e[3]=t("th",null,null,-1)),e[4]||(e[4]=t("th",null,"ID Zadatka",-1)),e[5]||(e[5]=t("th",null,"Kontakt email",-1)),e[6]||(e[6]=t("th",null,"Preferirane tehnologije",-1)),e[7]||(e[7]=t("th",null,"Trajanje (sati)",-1)),e[8]||(e[8]=t("th",null,"Lokacija",-1)),_(b).userAdmin?(i(),u("th",Lt,"Max. mjesta")):c("",!0),_(b).userAdmin?(i(),u("th",Mt,"Dostupno mjesta")):c("",!0),e[9]||(e[9]=t("th",null,null,-1))])]),t("tbody",null,[(i(!0),u(S,null,T(j.value,a=>(i(),u("tr",{key:a.id_zadatak,class:$({"selected-row":_(M)===a.id_zadatak})},[r.checkable?(i(),y(at,{key:0,value:D(a),disabled:G.value&&!D(a),onChecked:x=>H(x,a)},null,8,["value","disabled","onChecked"])):c("",!0),t("td",Nt,[p(tt,{avatar:O(a),class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"},null,8,["avatar"])]),t("td",Bt,s(a.id_zadatak),1),t("td",Dt,s(a.poslodavac_email),1),t("td",Tt,s(a.preferirane_tehnologije),1),t("td",Ft,s(a.trajanje_sati),1),t("td",Vt,s(a.lokacija),1),_(b).userAdmin?(i(),u("td",qt,s(a.broj_studenata),1)):c("",!0),_(b).userAdmin?(i(),u("td",Ut,s(a.dostupno_mjesta),1)):c("",!0),t("td",Et,[p(V,{type:"justify-start lg:justify-end","no-wrap":""},{default:z(()=>[p(F,{color:"fipu_blue",icon:_(Q),small:"",onClick:x=>h.value=a},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),t("div",It,[p(Y,null,{default:z(()=>[p(V,null,{default:z(()=>[(i(!0),u(S,null,T(E.value,a=>(i(),y(F,{key:a,active:a===d.value,label:a+1,color:a===d.value?"lightDark":"whiteDark",small:"",onClick:x=>d.value=a},null,8,["active","label","color","onClick"]))),128))]),_:1}),t("small",null,"Stranica "+s(n.value)+" od "+s(k.value),1)]),_:1})])],64))}};export{Xt as _,zt as a,Yt as b,Pt as c};
