import{_ as w,m as Q,K as ne,ak as oe,al as ie,c as de,n as ce,am as ue,e as re,a0 as _e,an as me,ao as ve}from"./BaseButton.27532ae3.js";import{g as j,u as W,m as E,_ as ee,U as X,s as G,a as A,b as he}from"./index.eae3abcf.js";import{C as J,a as fe}from"./LayoutAuthenticated.d3ac056d.js";import{_ as H,a as ke}from"./SectionTitleLineWithButton.0f0e8423.js";import{_ as L}from"./CardBox.7c3ad423.js";import{C as be}from"./CardBoxComponentEmpty.cb0e404b.js";import{a as ae,_ as pe,b as ge}from"./TableAvailableAssignments.807de5bc.js";import{L as Ae,_ as te}from"./LoadingOverlay.74bda4bd.js";import{_ as x}from"./BaseButtons.b1450643.js";import{r as _,f as k,w as F,q as le,x as i,y as m,F as a,G as C,J as u,u as o,K as y,z as e,H as M,M as D,C as se,A as r,P as U,N as je,O as ye}from"./vue.63142468.js";import{_ as ze}from"./FormField.2ed086df.js";import"./vendor.4c47bd8f.js";import"./SnackBar.4cd73fe8.js";const Ce=e("br",null,null,-1),$e={key:0},we=e("th",null,"ID Zadatka",-1),xe=e("th",null,"Kontakt email",-1),Me=e("th",null,"Preferirane tehnologije",-1),Se=e("th",null,"Trajanje (sati)",-1),Ne=e("th",null,"Lokacija",-1),Te=e("th",null,"Max. mjesta",-1),Pe=e("th",null,null,-1),Ve={"data-label":"id_zadatak"},Le={"data-label":"Kontakt email"},Ue={"data-label":"Preferirane tehnologije"},Ee={"data-label":"Trajanje (sati)"},Fe={"data-label":"Lokacija"},De={key:1,"data-label":"Max. studenata"},Be={class:"before:hidden lg:w-1 whitespace-nowrap"},Ie={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Y=3,Oe={__name:"TableRejectedAssignments",props:{checkable:Boolean},setup(b){const f=_(null),v=_([]);let p=k(()=>j.checkedAssignments),g=_("");const z=W();async function B(){const t=z.params.id_zadatak;t&&(g.value=t)}F(()=>z.params.id_zadatak,B,{immediate:!0}),le(async()=>{const t=await j.fetchAvailableAssignments();v.value=t.filter(d=>d.voditelj_odobrio.value=="odbijeno"),j.resetAssignments()});const $=_(5),h=_(0),I=k(()=>v.value.slice($.value*h.value,$.value*(h.value+1))),S=k(()=>Math.ceil(v.value.length/$.value)),O=k(()=>h.value+1),K=k(()=>{const t=[];for(let d=0;d<S.value;d++)t.push(d);return t}),N=_({}),R=k(()=>p.value.length>=Y);F(p,t=>{t.forEach(d=>{N.value[d.id_zadatak]=!1})});const T=t=>p.value.some(d=>d.id_zadatak===t.id_zadatak),Z=(t,d)=>{if(t){if(p.value.length>=Y){alert("You can only select a maximum of 3 assignments."),N[d.id_zadatak]=!1;return}j.addAssignment(d)}else j.removeAssignment(d)};return(t,d)=>(i(),m(M,null,[a(Ae,{"is-active":!v.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]),f.value?(i(),C(J,{key:0,modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=n=>f.value=n),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:d[1]||(d[1]=n=>o(E).activateLogoutModal(!1))},{default:u(()=>[a(ae,{data:f.value},null,8,["data"]),Ce]),_:1},8,["modelValue"])):y("",!0),e("table",null,[e("thead",null,[e("tr",null,[b.checkable?(i(),m("th",$e)):y("",!0),we,xe,Me,Se,Ne,Te,Pe])]),e("tbody",null,[(i(!0),m(M,null,D(I.value,n=>(i(),m("tr",{key:n.id_zadatak,class:se({"selected-row":o(g)===n.id_zadatak})},[b.checkable?(i(),C(te,{key:0,value:T(n),disabled:R.value&&!T(n),onChecked:P=>Z(P,n)},null,8,["value","disabled","onChecked"])):y("",!0),e("td",Ve,r(n.id_zadatak),1),e("td",Le,r(n.poslodavac_email),1),e("td",Ue,r(n.preferirane_tehnologije),1),e("td",Ee,r(n.trajanje_sati),1),e("td",Fe,r(n.lokacija),1),o(E).userAdmin?(i(),m("td",De,r(n.broj_studenata),1)):y("",!0),e("td",Be,[a(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[a(w,{color:"fipu_blue",icon:o(Q),small:"",onClick:P=>f.value=n},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),e("div",Ie,[a(ee,null,{default:u(()=>[a(x,null,{default:u(()=>[(i(!0),m(M,null,D(K.value,n=>(i(),C(w,{key:n,active:n===h.value,label:n+1,color:n===h.value?"lightDark":"whiteDark",small:"",onClick:P=>h.value=n},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+r(O.value)+" od "+r(S.value),1)]),_:1})])],64))}},Ke=e("br",null,null,-1),Re={key:0,class:"mb-4"},Ze={key:1,class:"mb-4"},Ge={key:0},He=e("th",null,"ID Zadatka",-1),Je=e("th",null,"Kontakt email",-1),Xe=e("th",null,"Preferirane tehnologije",-1),Ye=e("th",null,"Trajanje (sati)",-1),qe=e("th",null,"Lokacija",-1),Qe=e("th",null,null,-1),We=e("th",null,null,-1),ea=e("th",null,null,-1),aa={"data-label":"id_zadatak"},ta={"data-label":"Kontakt email"},la={"data-label":"Preferirane tehnologije"},sa={"data-label":"Trajanje (sati)"},na={"data-label":"Lokacija"},oa={class:"before:hidden lg:w-1 whitespace-nowrap"},ia={class:"before:hidden lg:w-1 whitespace-nowrap"},da={class:"before:hidden lg:w-1 whitespace-nowrap"},ca={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},q=3,ua={__name:"TableNewAssignments",props:{checkable:Boolean},setup(b){const f=_(null),v=_([]);let p=k(()=>j.checkedAssignments),g=_("");const z=W();async function B(){const c=z.params.id_zadatak;c&&(g.value=c)}F(()=>z.params.id_zadatak,B,{immediate:!0}),le(async()=>{const c=await j.fetchAvailableAssignments();v.value=c.filter(l=>l.dostupno_mjesta>0&&l.voditelj_odobrio.value=="u razradi"),X.isArrayEmpty(v.value)?(G.pushMessage("Nema novih zadataka","info"),A.newAssignmentsFound=!1):(G.pushMessage("Prona\u0111eni su novi zadaci, molimo da ih pregledate","info"),A.newAssignmentsFound=!0),A.newAssignments=v.value,j.resetAssignments()});const $=_(5),h=_(0),I=k(()=>v.value.slice($.value*h.value,$.value*(h.value+1))),S=k(()=>Math.ceil(v.value.length/$.value)),O=k(()=>h.value+1),K=k(()=>{const c=[];for(let l=0;l<S.value;l++)c.push(l);return c}),N=_({}),R=k(()=>p.value.length>=q);F(p,c=>{c.forEach(l=>{N.value[l.id_zadatak]=!1})});const T=c=>p.value.some(l=>l.id_zadatak===c.id_zadatak),Z=(c,l)=>{if(c){if(p.value.length>=q){alert("You can only select a maximum of 3 assignments."),N[l.id_zadatak]=!1;return}j.addAssignment(l)}else j.removeAssignment(l)},t=_({isActive:!1,action:null,assignment:{id_zadatak:null}}),d=(c,l)=>{t.value={isActive:!0,action:c,assignment:l}},n=async()=>{const c=t.value.action==="accept"?"odobreno":"odbijeno";A.handleTask(t.value.assignment.id_zadatak,c)&&(G.pushMessage("A\u017Eurirano stanje zadatka","success"),await X.wait(.5),location.reload()),t.value.isActive=!1},P=()=>{t.value.isActive=!1};return(c,l)=>(i(),m(M,null,[f.value?(i(),C(J,{key:0,modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=s=>f.value=s),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:l[1]||(l[1]=s=>o(E).activateLogoutModal(!1))},{default:u(()=>[a(ae,{data:f.value},null,8,["data"]),Ke]),_:1},8,["modelValue"])):y("",!0),a(J,{modelValue:t.value.isActive,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.isActive=s),title:"Potvrda akcije","button-label":t.value.action==="accept"?"Prihvati":"Odbij","has-cancel":"",onCancel:P,onConfirm:n},{default:u(()=>[t.value.action==="accept"?(i(),m("div",Re,[U(" Jeste li sigurni da \u017Eelite prihvatiti zadatak - "),e("b",null,r(t.value.assignment.id_zadatak),1),U(" ? ")])):(i(),m("div",Ze,[U(" Jeste li sigurni da \u017Eelite odbiti zadatak - "),e("b",null,r(t.value.assignment.id_zadatak),1),U(" ? ")]))]),_:1},8,["modelValue","button-label"]),e("table",null,[e("thead",null,[e("tr",null,[b.checkable?(i(),m("th",Ge)):y("",!0),He,Je,Xe,Ye,qe,Qe,We,ea])]),e("tbody",null,[(i(!0),m(M,null,D(I.value,s=>(i(),m("tr",{key:s.id_zadatak,class:se({"selected-row":o(g)===s.id_zadatak})},[b.checkable?(i(),C(te,{key:0,value:T(s),disabled:R.value&&!T(s),onChecked:V=>Z(V,s)},null,8,["value","disabled","onChecked"])):y("",!0),e("td",aa,r(s.id_zadatak),1),e("td",ta,r(s.poslodavac_email),1),e("td",la,r(s.preferirane_tehnologije),1),e("td",sa,r(s.trajanje_sati),1),e("td",na,r(s.lokacija),1),e("td",oa,[a(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[a(w,{color:"fipu_blue",icon:o(Q),small:"",onClick:V=>f.value=s},null,8,["icon","onClick"])]),_:2},1024)]),e("td",ia,[a(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[a(w,{color:"success",icon:o(ne),small:"",onClick:V=>d("accept",s)},null,8,["icon","onClick"])]),_:2},1024)]),e("td",da,[a(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[a(w,{color:"danger",icon:o(oe),small:"",onClick:V=>d("decline",s)},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),e("div",ca,[a(ee,null,{default:u(()=>[a(x,null,{default:u(()=>[(i(!0),m(M,null,D(K.value,s=>(i(),C(w,{key:s,active:s===h.value,label:s+1,color:s===h.value?"lightDark":"whiteDark",small:"",onClick:V=>h.value=s},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+r(O.value)+" od "+r(S.value),1)]),_:1})])],64))}};const ra=b=>(je("data-v-78ee29b6"),b=b(),ye(),b),_a=ra(()=>e("p",{class:"mb-4"},"U tablici ispod se nalaze novo-prijavljeni zadaci koje je potrebno prou\u010Diti te odobriti kako bi ih studenti mogli prijaviti, ili odbiti ukoliko ne zadovoljavaju definirane zahtjeve.",-1)),ma={class:"flex flex-row"},va={class:"mb-4"},ha={__name:"AvailableAssignments",setup(b){const v=_("http://localhost:4000/poslodavci/novi-zadatak");return(p,g)=>(i(),m("div",null,[o(E).userAuthenticated?(i(),C(fe,{key:0},{default:u(()=>[a(ke,null,{default:u(()=>[a(H,{icon:o(ie),title:"Novi zadaci (u razradi)",main:""},null,8,["icon"]),a(ze,{class:"md:w-1/2",label:"Forma za prijavu novog zadatka"},{default:u(()=>[a(de,{modelValue:v.value,"onUpdate:modelValue":g[0]||(g[0]=z=>v.value=z),"icon-left":o(ce),"icon-right":o(ue),name:"addNewAssignmentLink",readonly:"",copyable:""},null,8,["modelValue","icon-left","icon-right"])]),_:1}),_a,a(L,{"has-table":""},{default:u(()=>[a(ua)]),_:1}),o(A).newAssignments.length?y("",!0):(i(),C(L,{key:0},{default:u(()=>[a(be)]),_:1})),a(H,{class:"mt-8",icon:o(re),title:"Aktivni (odobreni) zadaci",main:""},null,8,["icon"]),e("div",ma,[e("div",va,[a(pe,{class:"cursor-pointer",left:!1,icon:o(A).availableAssignmentsFilter?o(_e):o(me),color:o(A).availableAssignmentsFilter?"success":"info",label:o(A).availableAssignmentsFilter?"Samo slobodni":"Svi zadaci",onClick:g[1]||(g[1]=z=>o(A).availableAssignmentsFilter=!o(A).availableAssignmentsFilter)},null,8,["icon","color","label"])])]),a(L,{"has-table":""},{default:u(()=>[a(ge)]),_:1}),a(H,{class:"mt-8",icon:o(ve),title:"Odbijeni zadaci",main:""},null,8,["icon"]),a(L,{"has-table":""},{default:u(()=>[a(Oe)]),_:1})]),_:1})]),_:1})):y("",!0)]))}},Ma=he(ha,[["__scopeId","data-v-78ee29b6"]]);export{Ma as default};
