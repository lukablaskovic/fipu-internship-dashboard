import{r as d,q as T,x as l,y as i,G as p,J as V,F,K as y,z as a,H as C,M as z,C as A,A as _,u as x,f as g,Y as D,a as M,w as S,P as B,Q as L}from"./vue.63142468.js";import{_ as P}from"./CardBox.7c3ad423.js";import{_ as N}from"./FormField.2ed086df.js";import{_ as U}from"./FormCheckRadioGroup.21123d22.js";import{_ as E,m as I}from"./BaseButton.27532ae3.js";import{C as K}from"./LayoutAuthenticated.d3ac056d.js";import{_ as R}from"./BaseButtons.b1450643.js";import{L as W}from"./LoadingOverlay.74bda4bd.js";import{a as Z}from"./TableAvailableAssignments.807de5bc.js";import{a as $}from"./index.eae3abcf.js";const q=a("br",null,null,-1),G={key:2},H=a("thead",{class:"text-sm"},[a("tr",null,[a("th",null,"Odabir"),a("th",null,"ID Zadatka"),a("th",null,"Kontakt email"),a("th",null,"Lokacija"),a("th")])],-1),J={class:"text-sm"},Q=["onClick"],Y={"data-label":"Odabir"},X={"data-label":"ID Zadatka"},ee={"data-label":"Kontakt email"},te={"data-label":"Lokacija"},ae={class:"before:hidden lg:w-1 whitespace-nowrap"},O={__name:"TableStudentPreferences",props:{checkable:Boolean},emits:["rowSelected"],setup(c,{emit:b}){const n=d(null),r=d([]),f=d({}),o=d({}),k=d({}),h=d(null),u=d([]),v=b,j=e=>{h.value=e.id_zadatak,v("rowSelected",e.id_zadatak)};return T(async()=>{r.value=await $.getPreferencesDetailed($.selectedStudent.process_instance_data.variables.id_preferencije),f.value=r.value.Prvi_odabir[0].details,o.value=r.value.Drugi_odabir[0].details,k.value=r.value.Treci_odabir[0].details,u.value=[f.value,o.value,k.value]}),(e,s)=>(l(),i(C,null,[n.value?(l(),p(K,{key:0,modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:s[1]||(s[1]=t=>e.mainStore.activateLogoutModal(!1))},{default:V(()=>[F(Z,{data:n.value},null,8,["data"]),q]),_:1},8,["modelValue"])):y("",!0),u.value.length?(l(),i("table",G,[H,a("tbody",J,[(l(!0),i(C,null,z(u.value,(t,m)=>(l(),i("tr",{key:t.id_zadatak,class:A({"selected-row":h.value===t.id_zadatak,"cursor-pointer":!0}),onClick:w=>j(t)},[a("td",Y,_(m+1),1),a("td",X,_(t.id_zadatak),1),a("td",ee,_(t.poslodavac_email),1),a("td",te,_(t.lokacija),1),a("td",ae,[F(R,{type:"justify-start lg:justify-end","no-wrap":""},{default:V(()=>[F(E,{color:"fipu_blue",icon:x(I),small:"",onClick:w=>n.value=t},null,8,["icon","onClick"])]),_:2},1024)])],10,Q))),128))])])):(l(),p(W,{key:1,"is-active":!u.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]))],64))}},le={__name:"TaskTable",props:{data:{type:String,required:!0}},setup(c){const b=c,n=g(()=>(b.data=="userPreferences",O));return(r,f)=>(l(),p(D(n.value)))}},oe={class:"mb-2"},se={key:3,class:"mt-2 mb-4"},fe={__name:"FormDynamic",props:{formFields:{type:Object,default:()=>{}},variables:{type:Object,default:()=>{}},documentation:{type:String,default:null}},emits:["update:modelValue","allFieldsFilled"],setup(c,{emit:b}){const n=b,r=c,f=le,o=M(Object.fromEntries(Object.keys(r.formFields).map(e=>[e,null])));T(()=>{for(const e in r.formFields)r.formFields[e].type==="var-string"&&r.variables[e]!==void 0&&(o[e]=r.variables[e])});const k=e=>{o.Alocirani_zadatak=e},h=e=>{const s=e.match(/selectFromTable-["']?([^"']+)["']?/);if(s)return s[1]},u=g(()=>Object.keys(o).every(e=>{const s=r.formFields[e],t=s.type==="yes-no-boolean"||s.type.startsWith("selectFromTable")&&v.value||s.type==="var-string";return!t||t&&o[e]!==null}));S(u,e=>{n("allFieldsFilled",e)});const v=g(()=>o.odabir_prihvacen!=="false");S(o,(e,s)=>{n("update:modelValue",e)},{deep:!0});const j=()=>{n("update:modelValue",o)};return(e,s)=>(l(),p(P,{"is-form":"","vertical-centered":"",onSubmit:L(j,["prevent"])},{default:V(()=>[a("div",oe,_(c.documentation),1),(l(!0),i(C,null,z(c.formFields,(t,m)=>(l(),i("div",{key:m},[t.type==="yes-no-boolean"?(l(),p(N,{key:0,label:t.label},{default:V(()=>[F(U,{modelValue:o[m],"onUpdate:modelValue":w=>o[m]=w,name:m,type:"radio",options:{true:"Da",false:"Ne"}},null,8,["modelValue","onUpdate:modelValue","name"])]),_:2},1032,["label"])):y("",!0),t.type==="var-string"?(l(),i(C,{key:1},[],64)):y("",!0),t.type.startsWith("selectFromTable")&&v.value?(l(),p(D(x(f)),{key:2,data:h(t.type),onRowSelected:k},null,40,["data"])):y("",!0),t.type.startsWith("selectFromTable")&&v.value?(l(),i("p",se,[B(" Odabrali ste: "),a("b",null,_(o.Alocirani_zadatak),1)])):y("",!0)]))),128))]),_:1},8,["onSubmit"]))}};export{fe as _};
