import{f as y,x as A,y as $,I as D,C as O,r as p,a as H,_ as K,G as Q,J as l,F as a,z as r,u as e,Q as U,P as V,b as W,A as P,K as X,T as Y,N as Z,O as ee}from"./vue.7e7f5872.js";import{c as i,r as f,a as L,n as ae,e as te,d as oe,i as se,m as ie,h as le,b as re,s as ne,u as de,g as _}from"./validators.2340ccfd.js";import{b as g,c as G,a_ as ue,B as me,a$ as ce,b9 as R,_ as I,H as pe,I as fe,J as _e}from"./BaseButton.1e728d8c.js";import{f as ge,w as ve,x as xe,b as we,c as he,g as z,U as be}from"./index.8a815c4b.js";import{_ as N}from"./CardBox.df29294d.js";import{_ as je}from"./FormCheckRadio.eb16ec4e.js";import{_ as v}from"./FormField.a1bdf2d9.js";import{_ as ke}from"./BaseButtons.06021fb9.js";import{S as J}from"./maps.05bf61c1.js";import{f as Me}from"./fipu_unipu.d4f12c80.js";import"./vendor.4c47bd8f.js";import"./LayoutAuthenticated.90c3e678.js";import"./SnackBar.fa913be1.js";import"./SectionTitleLineWithButton.f6e95eda.js";import"./TableAvailableAssignments.2e62d9af.js";import"./LoadingOverlay.157b2581.js";import"./FormFilePicker.b782ee71.js";import"./FormCheckRadioGroup.c52e2c40.js";const Ve={__name:"SectionSplitRegister",props:{bg:{type:String,required:!0,validator:d=>["blue","pinkRed"].includes(d)}},setup(d){const m=d,o=y(()=>{if(ge.darkMode)return ve;switch(m.bg){case"blue":return xe}return""});return(k,B)=>(A(),$("div",{class:O(["md:px-16 lg:px-20 xl:px-28 2xl:px-36 transition-all duration-300 flex justify-center",o.value])},[D(k.$slots,"default",{cardClass:"shadow-2xl"})],2))}},ze="/register_art.jpg";const ye=d=>(Z("data-v-25186304"),d=d(),ee(),d),Ae={key:0,class:"flex flex-col justify-center items-center overflow-hidden h-screen md:py-12 md:px-4 || transition-all duration-300"},Be={class:"flex flex-col md:flex-row flex-shrink h-full rounded-lg overflow-hidden"},Ce={class:"flex flex-col md:flex-row flex-shrink h-full || bg-white overflow-y-auto fipu_vertical_scrollbar || transition-all duration-300 px-0 lg:px-6 xl:px-16 2xl:px-28 || xl:gap-4 2xl:gap-8"},Se=["src"],Ue={href:"https://fipu.unipu.hr/",target:"_blank"},Pe=["src"],Le=ye(()=>r("h2",{class:"text-2xl lg:text-3xl 2xl:text-4xl text-fipu_gray font-bold xl:mb-1 mb-2 md:mb-0 2xl:mb-4"},"Molimo unesite va\u0161e podatke",-1)),Ge={class:"md:text-sm lg:text-sm 2xl:text-base mb-2 2xl:mb-4 text-justify"},Re={class:"flex flex-col md:flex-row gap-6 md:gap-2"},Ie={class:"flex flex-col flex-1"},Ne={class:"flex flex-col flex-1"},Je={class:"mt-2 lg:mt-8 flex items-center"},$e={__name:"RegisterView",setup(d){let m=p(!1);const o=H({ime:"",prezime:"",email:"",JMBAG:"",godina_studija:J.GodinaStudijaMappings[0],password:"",passwordConfirm:""}),k=y(()=>o.password),B={ime:{required:i.withMessage("Polje je obavezno",f),croatianAlpha:i.withMessage("Polje smije sadr\u017Eavati samo slova",L)},prezime:{required:i.withMessage("Polje je obavezno",f),croatianAlpha:i.withMessage("Polje smije sadr\u017Eavati samo slova",L)},JMBAG:{required:i.withMessage("Polje je obavezno",f),numeric:i.withMessage("Polje smije sadr\u017Eavati samo brojeve",ae),exactLength:i.withMessage("JMBAG mora sadr\u017Eavati to\u010Dno 10 znamenki",te(10))},godina_studija:{required:i.withMessage("Polje je obavezno",f)},email:{required:i.withMessage("Polje je obavezno",f),email:i.withMessage("Molimo unesite ispravnu e-mail adresu",oe),isUnipuEmail:i.withMessage("Molimo unesite va\u0161u UNIPU e-mail adresu",se)},password:{required:i.withMessage("Polje je obavezno",f),minLength:i.withMessage("Lozinka mora sadr\u017Eavati minimalno 6 znakova",ie(6)),containsAlpha:i.withMessage("Lozinka mora sadr\u017Eavati barem jedno slovo",le),containsNumeric:i.withMessage("Lozinka mora sadr\u017Eavati barem jedan broj",re)},passwordConfirm:{required:i.withMessage("Polje je obavezno",f),sameAs:i.withMessage("Lozinke se ne podudaraju",ne(k))}},u=de(B,o),x=p(!1),C=he();async function q(){if(x.value=!0,!await u.value.$validate()){x.value=!1;return}let t={...o,godina_studija:o.godina_studija.dbLabel};delete t.passwordConfirm;let c=await z.registerStudent(t);if(x.value=!1,c.response&&c.response.status===400)b("warning");else if(c.response&&c.response.status===500)b("danger");else{let s=await z.createInternshipInstance();if(s.status!==500)await z.update_process_instance(c.data.id,s.id),b("success"),await be.wait(2),C.push("/login");else{b("danger");return}}}const n=p(null);let w=p(),h=p();const E=p([]),M=y(()=>E.value.indexOf("outline")>-1);function b(j){switch(j){case"success":n.value.color="success",n.value.icon=_e,n.value.duration=1,w.value="To je to!",h.value=" Uspje\u0161na registracija!";break;case"warning":n.value.color="warning",n.value.icon=fe,w.value="Upozorenje.",h.value=" Ra\u010Dun s ovim podacima ve\u0107 postoji.";break;case"danger":n.value.color="danger",n.value.icon=pe,w.value="Gre\u0161ka!",h.value="Sustav ne radi. Nije do vas, molimo poku\u0161ajte opet ili kontaktirajte voditelja prakse.";break}n.value.show()}const S=p(!1);function F(){S.value=!0}function T(){C.push("/login")}return(j,t)=>{const c=K("NotificationBar");return A(),Q(Ve,{bg:"blue",class:"flex items-start min-h-screen"},{default:l(()=>[a(Y,{appear:"","enter-active-class":"animate__animated animate__slideInLeft fast-animation","leave-active-class":"animate__animated animate__slideOutLeft fast-animation",onAfterLeave:T},{default:l(()=>[S.value?X("",!0):(A(),$("div",Ae,[r("div",Be,[r("div",Ce,[a(N,{"has-table":"",class:"hidden xl:flex justify-center items-center flex-1 bg-opacity-0 grow p-16 xl:px-0 xl:py-16 2xl:py-24 || transition-all duration-300"},{default:l(()=>[r("img",{src:e(ze),alt:"Register graphics",class:"2xl:pr-8 aspect-square max-h-full"},null,8,Se)]),_:1}),a(N,{"has-table":"","vertical-centered":"",class:"flex flex-col flex-shrink flex-1 bg-opacity-0 p-8 sm:p-16 xl:pl-2 xl:px-0 xl:py-24 || transition-all duration-300","is-form":"",onSubmit:U(q,["prevent"])},{default:l(()=>[r("a",Ue,[r("img",{src:e(Me),alt:"fipu logo",class:"h-20 xl:h-20 mb-6 object-contain transition-all duration-300"},null,8,Pe)]),Le,r("h2",Ge,[V(" Ve\u0107 imate ra\u010Dun ili \u017Eelite samo pregledati zadatke? Povratak na prijavu "),r("a",{class:"hover-underline-animation cursor-pointer text-fipu_text_blue hover:text-fipu_blue",onClick:t[0]||(t[0]=U(s=>F(),["prevent"]))},"ovdje"),V(". ")]),r("div",Re,[r("div",Ie,[a(v,{label:"Ime"},{default:l(()=>[a(g,{modelValue:o.ime,"onUpdate:modelValue":t[1]||(t[1]=s=>o.ime=s),"icon-left":e(G),error:e(_)(e(u),"ime"),name:"ime",autocomplete:"ime"},null,8,["modelValue","icon-left","error"])]),_:1}),a(v,{label:"Prezime"},{default:l(()=>[a(g,{modelValue:o.prezime,"onUpdate:modelValue":t[2]||(t[2]=s=>o.prezime=s),"icon-left":e(G),error:e(_)(e(u),"prezime"),name:"prezime",autocomplete:"prezime"},null,8,["modelValue","icon-left","error"])]),_:1}),a(v,{label:"JMBAG"},{default:l(()=>[a(g,{modelValue:o.JMBAG,"onUpdate:modelValue":t[3]||(t[3]=s=>o.JMBAG=s),"icon-left":e(ue),error:e(_)(e(u),"JMBAG"),name:"JMBAG",autocomplete:"JMBAG"},null,8,["modelValue","icon-left","error"])]),_:1}),a(v,{label:"UNIPU E-mail"},{default:l(()=>[a(g,{modelValue:o.email,"onUpdate:modelValue":t[4]||(t[4]=s=>o.email=s),"icon-left":e(me),error:e(_)(e(u),"email"),name:"email",autocomplete:"username"},null,8,["modelValue","icon-left","error"])]),_:1})]),r("div",Ne,[a(v,{label:"Godina studija"},{default:l(()=>[a(g,{modelValue:o.godina_studija,"onUpdate:modelValue":t[5]||(t[5]=s=>o.godina_studija=s),"icon-left":e(ce),error:e(_)(e(u),"godina_studija"),options:e(J).GodinaStudijaMappings},null,8,["modelValue","icon-left","error","options"])]),_:1}),a(v,{label:"Lozinka"},{default:l(()=>[a(g,{modelValue:o.password,"onUpdate:modelValue":t[6]||(t[6]=s=>o.password=s),"icon-left":e(R),error:e(_)(e(u),"password"),type:"password",name:"password",autocomplete:"current-password"},null,8,["modelValue","icon-left","error"])]),_:1}),a(v,{label:"Potvrda lozinke"},{default:l(()=>[a(g,{modelValue:o.passwordConfirm,"onUpdate:modelValue":t[7]||(t[7]=s=>o.passwordConfirm=s),"icon-left":e(R),error:e(_)(e(u),"passwordConfirm"),type:"password",name:"passwordConfirm"},null,8,["modelValue","icon-left","error"])]),_:1}),r("div",Je,[a(je,{modelValue:e(m),"onUpdate:modelValue":t[8]||(t[8]=s=>W(m)?m.value=s:m=s),name:"data_confirmed",type:"checkbox",label:"Potvr\u0111ujem ispravnost podataka.","input-value":!0},null,8,["modelValue"])])])]),a(ke,{class:"space-y-2 mt-4 lg:mt-8"},{default:l(()=>[a(I,{disabled:!e(m)||x.value,type:"submit",color:"fipu_light_blue",label:"Registriraj se",loading:x.value,class:"w-full"},null,8,["disabled","loading"])]),_:1}),a(c,{ref_key:"notificationBar",ref:n,class:"animate__animated animate__fadeInUp mt-4",outline:M.value},{right:l(()=>[a(I,{icon:j.mdiClose,color:M.value?"success":"white",outline:M.value,"rounded-full":"",small:""},null,8,["icon","color","outline"])]),default:l(()=>[r("b",null,P(e(w)),1),V(" "+P(e(h))+" ",1)]),_:1},8,["outline"])]),_:1},8,["onSubmit"])])])]))]),_:1})]),_:1})}}},ia=we($e,[["__scopeId","data-v-25186304"]]);export{ia as default};
