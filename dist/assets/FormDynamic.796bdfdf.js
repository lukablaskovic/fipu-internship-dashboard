import{r as d,q as T,x as o,y as i,G as _,J as V,F,z as l,K as y,H as C,M as z,C as A,A as p,u as x,f as g,Y as D,a as M,w as O,N as B,O as L}from"./vue.f9cfebed.js";import{_ as N}from"./CardBox.e093a2ca.js";import{_ as P}from"./FormField.f36ede2f.js";import{_ as U}from"./FormCheckRadioGroup.fc40e1b5.js";import{_ as E,m as I}from"./BaseButton.f01ab37d.js";import{C as K}from"./LayoutAuthenticated.1632b032.js";import{_ as R}from"./BaseButtons.e0ebdabe.js";import{L as W}from"./LoadingOverlay.a4b584d6.js";import{a as Z}from"./TableAvailableAssignments.cb162f72.js";import{a as $}from"./index.54838ea2.js";const q={key:2},G={class:"text-sm"},H=["onClick"],J={"data-label":"Odabir"},Y={"data-label":"ID Zadatka"},Q={"data-label":"Kontakt email"},X={"data-label":"Lokacija"},ee={class:"before:hidden lg:w-1 whitespace-nowrap"},S={__name:"TableStudentPreferences",props:{checkable:Boolean},emits:["rowSelected"],setup(u,{emit:f}){const n=d(null),r=d([]),b=d({}),s=d({}),k=d({}),h=d(null),c=d([]),v=f,j=e=>{h.value=e.id_zadatak,v("rowSelected",e.id_zadatak)};return T(async()=>{r.value=await $.getPreferencesDetailed($.selectedStudent.process_instance_data.variables.id_preferencije),b.value=r.value.Prvi_odabir[0].details,s.value=r.value.Drugi_odabir[0].details,k.value=r.value.Treci_odabir[0].details,c.value=[b.value,s.value,k.value]}),(e,a)=>(o(),i(C,null,[n.value?(o(),_(K,{key:0,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=t=>n.value=t),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:a[1]||(a[1]=t=>e.mainStore.activateLogoutModal(!1))},{default:V(()=>[F(Z,{data:n.value},null,8,["data"]),a[2]||(a[2]=l("br",null,null,-1))]),_:1},8,["modelValue"])):y("",!0),c.value.length?(o(),i("table",q,[a[3]||(a[3]=l("thead",{class:"text-sm"},[l("tr",null,[l("th",null,"Odabir"),l("th",null,"ID Zadatka"),l("th",null,"Kontakt email"),l("th",null,"Lokacija"),l("th")])],-1)),l("tbody",G,[(o(!0),i(C,null,z(c.value,(t,m)=>(o(),i("tr",{key:t.id_zadatak,class:A({"selected-row":h.value===t.id_zadatak,"cursor-pointer":!0}),onClick:w=>j(t)},[l("td",J,p(m+1),1),l("td",Y,p(t.id_zadatak),1),l("td",Q,p(t.poslodavac_email),1),l("td",X,p(t.lokacija),1),l("td",ee,[F(R,{type:"justify-start lg:justify-end","no-wrap":""},{default:V(()=>[F(E,{color:"fipu_blue",icon:x(I),small:"",onClick:w=>n.value=t},null,8,["icon","onClick"])]),_:2},1024)])],10,H))),128))])])):(o(),_(W,{key:1,"is-active":!c.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]))],64))}},te={__name:"TaskTable",props:{data:{type:String,required:!0}},setup(u){const f=u,n=g(()=>(f.data=="userPreferences",S));return(r,b)=>(o(),_(D(n.value)))}},ae={class:"mb-2"},le={key:3,class:"mt-2 mb-4"},_e={__name:"FormDynamic",props:{formFields:{type:Object,default:()=>{}},variables:{type:Object,default:()=>{}},documentation:{type:String,default:null}},emits:["update:modelValue","allFieldsFilled"],setup(u,{emit:f}){const n=f,r=u,b=te,s=M(Object.fromEntries(Object.keys(r.formFields).map(e=>[e,null])));T(()=>{for(const e in r.formFields)r.formFields[e].type==="var-string"&&r.variables[e]!==void 0&&(s[e]=r.variables[e])});const k=e=>{s.Alocirani_zadatak=e},h=e=>{const a=e.match(/selectFromTable-["']?([^"']+)["']?/);if(a)return a[1]},c=g(()=>Object.keys(s).every(e=>{const a=r.formFields[e],t=a.type==="yes-no-boolean"||a.type.startsWith("selectFromTable")&&v.value||a.type==="var-string";return!t||t&&s[e]!==null}));O(c,e=>{n("allFieldsFilled",e)});const v=g(()=>s.odabir_prihvacen!=="false");O(s,(e,a)=>{n("update:modelValue",e)},{deep:!0});const j=()=>{n("update:modelValue",s)};return(e,a)=>(o(),_(N,{"is-form":"","vertical-centered":"",onSubmit:L(j,["prevent"])},{default:V(()=>[l("div",ae,p(u.documentation),1),(o(!0),i(C,null,z(u.formFields,(t,m)=>(o(),i("div",{key:m},[t.type==="yes-no-boolean"?(o(),_(P,{key:0,label:t.label},{default:V(()=>[F(U,{modelValue:s[m],"onUpdate:modelValue":w=>s[m]=w,name:m,type:"radio",options:{true:"Da",false:"Ne"}},null,8,["modelValue","onUpdate:modelValue","name"])]),_:2},1032,["label"])):y("",!0),t.type==="var-string"?(o(),i(C,{key:1},[],64)):y("",!0),t.type.startsWith("selectFromTable")&&v.value?(o(),_(D(x(b)),{key:2,data:h(t.type),onRowSelected:k},null,40,["data"])):y("",!0),t.type.startsWith("selectFromTable")&&v.value?(o(),i("p",le,[a[0]||(a[0]=B(" Odabrali ste: ")),l("b",null,p(s.Alocirani_zadatak),1)])):y("",!0)]))),128))]),_:1}))}};export{_e as _};
