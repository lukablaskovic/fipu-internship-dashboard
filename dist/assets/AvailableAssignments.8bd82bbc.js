import{_ as w,m as Q,K as na,ak as oa,al as ia,c as da,n as ca,am as ua,e as ra,a0 as _a,an as ma,ao as va}from"./BaseButton.88917cf1.js";import{g as j,u as W,m as E,_ as aa,U as X,s as G,a as A,b as ha}from"./index.3ed05d22.js";import{C as J,a as fa}from"./LayoutAuthenticated.55647b64.js";import{_ as H,a as ka}from"./SectionTitleLineWithButton.2a6ee0db.js";import{_ as L}from"./CardBox.e754934c.js";import{C as ba}from"./CardBoxComponentEmpty.60d926bd.js";import{a as ea,_ as pa,b as ga}from"./TableAvailableAssignments.4adb7326.js";import{L as Aa,_ as ta}from"./LoadingOverlay.48b7e5cf.js";import{_ as x}from"./BaseButtons.b1450643.js";import{r as _,f as k,w as F,q as la,x as i,y as m,F as e,G as C,J as u,u as o,K as y,z as a,H as M,M as D,C as sa,A as r,P as U,N as ja,O as ya}from"./vue.63142468.js";import{_ as za}from"./FormField.3ec6eded.js";import"./vendor.4c47bd8f.js";import"./SnackBar.6cbba122.js";const Ca=a("br",null,null,-1),$a={key:0},wa=a("th",null,"ID Zadatka",-1),xa=a("th",null,"Kontakt email",-1),Ma=a("th",null,"Preferirane tehnologije",-1),Sa=a("th",null,"Trajanje (sati)",-1),Na=a("th",null,"Lokacija",-1),Ta=a("th",null,"Max. mjesta",-1),Pa=a("th",null,null,-1),Va={"data-label":"id_zadatak"},La={"data-label":"Kontakt email"},Ua={"data-label":"Preferirane tehnologije"},Ea={"data-label":"Trajanje (sati)"},Fa={"data-label":"Lokacija"},Da={key:1,"data-label":"Max. studenata"},Ba={class:"before:hidden lg:w-1 whitespace-nowrap"},Ia={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Y=3,Oa={__name:"TableRejectedAssignments",props:{checkable:Boolean},setup(b){const f=_(null),v=_([]);let p=k(()=>j.checkedAssignments),g=_("");const z=W();async function B(){const t=z.params.id_zadatak;t&&(g.value=t)}F(()=>z.params.id_zadatak,B,{immediate:!0}),la(async()=>{const t=await j.fetchAvailableAssignments();v.value=t.filter(d=>d.voditelj_odobrio.value=="odbijeno"),j.resetAssignments()});const $=_(5),h=_(0),I=k(()=>v.value.slice($.value*h.value,$.value*(h.value+1))),S=k(()=>Math.ceil(v.value.length/$.value)),O=k(()=>h.value+1),K=k(()=>{const t=[];for(let d=0;d<S.value;d++)t.push(d);return t}),N=_({}),R=k(()=>p.value.length>=Y);F(p,t=>{t.forEach(d=>{N.value[d.id_zadatak]=!1})});const T=t=>p.value.some(d=>d.id_zadatak===t.id_zadatak),Z=(t,d)=>{if(t){if(p.value.length>=Y){alert("You can only select a maximum of 3 assignments."),N[d.id_zadatak]=!1;return}j.addAssignment(d)}else j.removeAssignment(d)};return(t,d)=>(i(),m(M,null,[e(Aa,{"is-active":!v.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]),f.value?(i(),C(J,{key:0,modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=n=>f.value=n),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:d[1]||(d[1]=n=>o(E).activateLogoutModal(!1))},{default:u(()=>[e(ea,{data:f.value},null,8,["data"]),Ca]),_:1},8,["modelValue"])):y("",!0),a("table",null,[a("thead",null,[a("tr",null,[b.checkable?(i(),m("th",$a)):y("",!0),wa,xa,Ma,Sa,Na,Ta,Pa])]),a("tbody",null,[(i(!0),m(M,null,D(I.value,n=>(i(),m("tr",{key:n.id_zadatak,class:sa({"selected-row":o(g)===n.id_zadatak})},[b.checkable?(i(),C(ta,{key:0,value:T(n),disabled:R.value&&!T(n),onChecked:P=>Z(P,n)},null,8,["value","disabled","onChecked"])):y("",!0),a("td",Va,r(n.id_zadatak),1),a("td",La,r(n.poslodavac_email),1),a("td",Ua,r(n.preferirane_tehnologije),1),a("td",Ea,r(n.trajanje_sati),1),a("td",Fa,r(n.lokacija),1),o(E).userAdmin?(i(),m("td",Da,r(n.broj_studenata),1)):y("",!0),a("td",Ba,[e(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[e(w,{color:"fipu_blue",icon:o(Q),small:"",onClick:P=>f.value=n},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),a("div",Ia,[e(aa,null,{default:u(()=>[e(x,null,{default:u(()=>[(i(!0),m(M,null,D(K.value,n=>(i(),C(w,{key:n,active:n===h.value,label:n+1,color:n===h.value?"lightDark":"whiteDark",small:"",onClick:P=>h.value=n},null,8,["active","label","color","onClick"]))),128))]),_:1}),a("small",null,"Stranica "+r(O.value)+" od "+r(S.value),1)]),_:1})])],64))}},Ka=a("br",null,null,-1),Ra={key:0,class:"mb-4"},Za={key:1,class:"mb-4"},Ga={key:0},Ha=a("th",null,"ID Zadatka",-1),Ja=a("th",null,"Kontakt email",-1),Xa=a("th",null,"Preferirane tehnologije",-1),Ya=a("th",null,"Trajanje (sati)",-1),qa=a("th",null,"Lokacija",-1),Qa=a("th",null,null,-1),Wa=a("th",null,null,-1),ae=a("th",null,null,-1),ee={"data-label":"id_zadatak"},te={"data-label":"Kontakt email"},le={"data-label":"Preferirane tehnologije"},se={"data-label":"Trajanje (sati)"},ne={"data-label":"Lokacija"},oe={class:"before:hidden lg:w-1 whitespace-nowrap"},ie={class:"before:hidden lg:w-1 whitespace-nowrap"},de={class:"before:hidden lg:w-1 whitespace-nowrap"},ce={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},q=3,ue={__name:"TableNewAssignments",props:{checkable:Boolean},setup(b){const f=_(null),v=_([]);let p=k(()=>j.checkedAssignments),g=_("");const z=W();async function B(){const c=z.params.id_zadatak;c&&(g.value=c)}F(()=>z.params.id_zadatak,B,{immediate:!0}),la(async()=>{const c=await j.fetchAvailableAssignments();v.value=c.filter(l=>l.dostupno_mjesta>0&&l.voditelj_odobrio.value=="u razradi"),X.isArrayEmpty(v.value)?(G.pushMessage("Nema novih zadataka","info"),A.newAssignmentsFound=!1):(G.pushMessage("Prona\u0111eni su novi zadaci, molimo da ih pregledate","info"),A.newAssignmentsFound=!0),A.newAssignments=v.value,j.resetAssignments()});const $=_(5),h=_(0),I=k(()=>v.value.slice($.value*h.value,$.value*(h.value+1))),S=k(()=>Math.ceil(v.value.length/$.value)),O=k(()=>h.value+1),K=k(()=>{const c=[];for(let l=0;l<S.value;l++)c.push(l);return c}),N=_({}),R=k(()=>p.value.length>=q);F(p,c=>{c.forEach(l=>{N.value[l.id_zadatak]=!1})});const T=c=>p.value.some(l=>l.id_zadatak===c.id_zadatak),Z=(c,l)=>{if(c){if(p.value.length>=q){alert("You can only select a maximum of 3 assignments."),N[l.id_zadatak]=!1;return}j.addAssignment(l)}else j.removeAssignment(l)},t=_({isActive:!1,action:null,assignment:{id_zadatak:null}}),d=(c,l)=>{t.value={isActive:!0,action:c,assignment:l}},n=async()=>{const c=t.value.action==="accept"?"odobreno":"odbijeno";A.handleTask(t.value.assignment.id_zadatak,c)&&(G.pushMessage("A\u017Eurirano stanje zadatka","success"),await X.wait(.5),location.reload()),t.value.isActive=!1},P=()=>{t.value.isActive=!1};return(c,l)=>(i(),m(M,null,[f.value?(i(),C(J,{key:0,modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=s=>f.value=s),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:l[1]||(l[1]=s=>o(E).activateLogoutModal(!1))},{default:u(()=>[e(ea,{data:f.value},null,8,["data"]),Ka]),_:1},8,["modelValue"])):y("",!0),e(J,{modelValue:t.value.isActive,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.isActive=s),title:"Potvrda akcije","button-label":t.value.action==="accept"?"Prihvati":"Odbij","has-cancel":"",onCancel:P,onConfirm:n},{default:u(()=>[t.value.action==="accept"?(i(),m("div",Ra,[U(" Jeste li sigurni da \u017Eelite prihvatiti zadatak - "),a("b",null,r(t.value.assignment.id_zadatak),1),U(" ? ")])):(i(),m("div",Za,[U(" Jeste li sigurni da \u017Eelite odbiti zadatak - "),a("b",null,r(t.value.assignment.id_zadatak),1),U(" ? ")]))]),_:1},8,["modelValue","button-label"]),a("table",null,[a("thead",null,[a("tr",null,[b.checkable?(i(),m("th",Ga)):y("",!0),Ha,Ja,Xa,Ya,qa,Qa,Wa,ae])]),a("tbody",null,[(i(!0),m(M,null,D(I.value,s=>(i(),m("tr",{key:s.id_zadatak,class:sa({"selected-row":o(g)===s.id_zadatak})},[b.checkable?(i(),C(ta,{key:0,value:T(s),disabled:R.value&&!T(s),onChecked:V=>Z(V,s)},null,8,["value","disabled","onChecked"])):y("",!0),a("td",ee,r(s.id_zadatak),1),a("td",te,r(s.poslodavac_email),1),a("td",le,r(s.preferirane_tehnologije),1),a("td",se,r(s.trajanje_sati),1),a("td",ne,r(s.lokacija),1),a("td",oe,[e(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[e(w,{color:"fipu_blue",icon:o(Q),small:"",onClick:V=>f.value=s},null,8,["icon","onClick"])]),_:2},1024)]),a("td",ie,[e(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[e(w,{color:"success",icon:o(na),small:"",onClick:V=>d("accept",s)},null,8,["icon","onClick"])]),_:2},1024)]),a("td",de,[e(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[e(w,{color:"danger",icon:o(oa),small:"",onClick:V=>d("decline",s)},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),a("div",ce,[e(aa,null,{default:u(()=>[e(x,null,{default:u(()=>[(i(!0),m(M,null,D(K.value,s=>(i(),C(w,{key:s,active:s===h.value,label:s+1,color:s===h.value?"lightDark":"whiteDark",small:"",onClick:V=>h.value=s},null,8,["active","label","color","onClick"]))),128))]),_:1}),a("small",null,"Stranica "+r(O.value)+" od "+r(S.value),1)]),_:1})])],64))}};const re=b=>(ja("data-v-78ee29b6"),b=b(),ya(),b),_e=re(()=>a("p",{class:"mb-4"},"U tablici ispod se nalaze novo-prijavljeni zadaci koje je potrebno prou\u010Diti te odobriti kako bi ih studenti mogli prijaviti, ili odbiti ukoliko ne zadovoljavaju definirane zahtjeve.",-1)),me={class:"flex flex-row"},ve={class:"mb-4"},he={__name:"AvailableAssignments",setup(b){const v=_("https://fipu-praksa.unipu.hr/poslodavci/novi-zadatak");return(p,g)=>(i(),m("div",null,[o(E).userAuthenticated?(i(),C(fa,{key:0},{default:u(()=>[e(ka,null,{default:u(()=>[e(H,{icon:o(ia),title:"Novi zadaci (u razradi)",main:""},null,8,["icon"]),e(za,{class:"md:w-1/2",label:"Forma za prijavu novog zadatka"},{default:u(()=>[e(da,{modelValue:v.value,"onUpdate:modelValue":g[0]||(g[0]=z=>v.value=z),"icon-left":o(ca),"icon-right":o(ua),name:"addNewAssignmentLink",readonly:"",copyable:""},null,8,["modelValue","icon-left","icon-right"])]),_:1}),_e,e(L,{"has-table":""},{default:u(()=>[e(ue)]),_:1}),o(A).newAssignments.length?y("",!0):(i(),C(L,{key:0},{default:u(()=>[e(ba)]),_:1})),e(H,{class:"mt-8",icon:o(ra),title:"Aktivni (odobreni) zadaci",main:""},null,8,["icon"]),a("div",me,[a("div",ve,[e(pa,{class:"cursor-pointer",left:!1,icon:o(A).availableAssignmentsFilter?o(_a):o(ma),color:o(A).availableAssignmentsFilter?"success":"info",label:o(A).availableAssignmentsFilter?"Samo slobodni":"Svi zadaci",onClick:g[1]||(g[1]=z=>o(A).availableAssignmentsFilter=!o(A).availableAssignmentsFilter)},null,8,["icon","color","label"])])]),e(L,{"has-table":""},{default:u(()=>[e(ga)]),_:1}),e(H,{class:"mt-8",icon:o(va),title:"Odbijeni zadaci",main:""},null,8,["icon"]),e(L,{"has-table":""},{default:u(()=>[e(Oa)]),_:1})]),_:1})]),_:1})):y("",!0)]))}},Me=ha(he,[["__scopeId","data-v-78ee29b6"]]);export{Me as default};
