import{_ as w,m as Q,I as sa,ai as ia,aj as oa,c as da,n as ua,ak as ra,e as ca,Z as ma,al as va,am as fa}from"./BaseButton.bc4b7cea.js";import{e as A,u as W,m as E,_ as aa,U as X,s as G,a as h,b as ka}from"./index.79b4ef11.js";import{C as J,a as _a}from"./LayoutAuthenticated.0d193c5e.js";import{_ as H,a as ba}from"./SectionTitleLineWithButton.01820f4a.js";import{_ as L}from"./CardBox.07416a0a.js";import{C as pa}from"./CardBoxComponentEmpty.12ffe3a8.js";import{a as ea,_ as ga,b as ha}from"./TableAvailableAssignments.29413b37.js";import{L as Aa,_ as la}from"./LoadingOverlay.e769fc1d.js";import{_ as x}from"./BaseButtons.e0ebdabe.js";import{r as m,f as p,w as F,q as ta,x as d,y as v,F as t,G as z,J as r,z as e,u as o,K as j,H as M,M as D,C as na,A as c,N as U}from"./vue.f9cfebed.js";import{_ as ja}from"./FormField.2e1ad0a6.js";import"./vendor.15896b3d.js";import"./SnackBar.1a5a1851.js";const ya={key:0},za={"data-label":"id_zadatak"},Ca={"data-label":"Kontakt email"},$a={"data-label":"Preferirane tehnologije"},wa={"data-label":"Trajanje (sati)"},xa={"data-label":"Lokacija"},Ma={key:1,"data-label":"Max. studenata"},Na={class:"before:hidden lg:w-1 whitespace-nowrap"},Ta={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Y=3,Pa={__name:"TableRejectedAssignments",props:{checkable:Boolean},setup($){const _=m(null),f=m([]);let g=p(()=>A.checkedAssignments),b=m("");const y=W();async function B(){const n=y.params.id_zadatak;n&&(b.value=n)}F(()=>y.params.id_zadatak,B,{immediate:!0}),ta(async()=>{const n=await A.fetchAvailableAssignments();f.value=n.filter(l=>l.voditelj_odobrio.value=="odbijeno"),A.resetAssignments()});const C=m(5),k=m(0),I=p(()=>f.value.slice(C.value*k.value,C.value*(k.value+1))),N=p(()=>Math.ceil(f.value.length/C.value)),O=p(()=>k.value+1),R=p(()=>{const n=[];for(let l=0;l<N.value;l++)n.push(l);return n}),T=m({}),K=p(()=>g.value.length>=Y);F(g,n=>{n.forEach(l=>{T.value[l.id_zadatak]=!1})});const P=n=>g.value.some(l=>l.id_zadatak===n.id_zadatak),Z=(n,l)=>{if(n){if(g.value.length>=Y){alert("You can only select a maximum of 3 assignments."),T[l.id_zadatak]=!1;return}A.addAssignment(l)}else A.removeAssignment(l)};return(n,l)=>(d(),v(M,null,[t(Aa,{"is-active":!f.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]),_.value?(d(),z(J,{key:0,modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=i=>_.value=i),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:l[1]||(l[1]=i=>o(E).activateLogoutModal(!1))},{default:r(()=>[t(ea,{data:_.value},null,8,["data"]),l[2]||(l[2]=e("br",null,null,-1))]),_:1},8,["modelValue"])):j("",!0),e("table",null,[e("thead",null,[e("tr",null,[$.checkable?(d(),v("th",ya)):j("",!0),l[3]||(l[3]=e("th",null,"ID Zadatka",-1)),l[4]||(l[4]=e("th",null,"Kontakt email",-1)),l[5]||(l[5]=e("th",null,"Preferirane tehnologije",-1)),l[6]||(l[6]=e("th",null,"Trajanje (sati)",-1)),l[7]||(l[7]=e("th",null,"Lokacija",-1)),l[8]||(l[8]=e("th",null,"Max. mjesta",-1)),l[9]||(l[9]=e("th",null,null,-1))])]),e("tbody",null,[(d(!0),v(M,null,D(I.value,i=>(d(),v("tr",{key:i.id_zadatak,class:na({"selected-row":o(b)===i.id_zadatak})},[$.checkable?(d(),z(la,{key:0,value:P(i),disabled:K.value&&!P(i),onChecked:S=>Z(S,i)},null,8,["value","disabled","onChecked"])):j("",!0),e("td",za,c(i.id_zadatak),1),e("td",Ca,c(i.poslodavac_email),1),e("td",$a,c(i.preferirane_tehnologije),1),e("td",wa,c(i.trajanje_sati),1),e("td",xa,c(i.lokacija),1),o(E).userAdmin?(d(),v("td",Ma,c(i.broj_studenata),1)):j("",!0),e("td",Na,[t(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(w,{color:"fipu_blue",icon:o(Q),small:"",onClick:S=>_.value=i},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),e("div",Ta,[t(aa,null,{default:r(()=>[t(x,null,{default:r(()=>[(d(!0),v(M,null,D(R.value,i=>(d(),z(w,{key:i,active:i===k.value,label:i+1,color:i===k.value?"lightDark":"whiteDark",small:"",onClick:S=>k.value=i},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+c(O.value)+" od "+c(N.value),1)]),_:1})])],64))}},Sa={key:0,class:"mb-4"},Va={key:1,class:"mb-4"},La={key:0},Ua={"data-label":"id_zadatak"},Ea={"data-label":"Kontakt email"},Fa={"data-label":"Preferirane tehnologije"},Da={"data-label":"Trajanje (sati)"},Ba={"data-label":"Lokacija"},Ia={class:"before:hidden lg:w-1 whitespace-nowrap"},Oa={class:"before:hidden lg:w-1 whitespace-nowrap"},Ra={class:"before:hidden lg:w-1 whitespace-nowrap"},Ka={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},q=3,Za={__name:"TableNewAssignments",props:{checkable:Boolean},setup($){const _=m(null),f=m([]);let g=p(()=>A.checkedAssignments),b=m("");const y=W();async function B(){const u=y.params.id_zadatak;u&&(b.value=u)}F(()=>y.params.id_zadatak,B,{immediate:!0}),ta(async()=>{const u=await A.fetchAvailableAssignments();f.value=u.filter(a=>a.dostupno_mjesta>0&&a.voditelj_odobrio.value=="u razradi"),X.isArrayEmpty(f.value)?(G.pushMessage("Nema novih zadataka","info"),h.newAssignmentsFound=!1):(G.pushMessage("Prona\u0111eni su novi zadaci, molimo da ih pregledate","info"),h.newAssignmentsFound=!0),h.newAssignments=f.value,A.resetAssignments()});const C=m(5),k=m(0),I=p(()=>f.value.slice(C.value*k.value,C.value*(k.value+1))),N=p(()=>Math.ceil(f.value.length/C.value)),O=p(()=>k.value+1),R=p(()=>{const u=[];for(let a=0;a<N.value;a++)u.push(a);return u}),T=m({}),K=p(()=>g.value.length>=q);F(g,u=>{u.forEach(a=>{T.value[a.id_zadatak]=!1})});const P=u=>g.value.some(a=>a.id_zadatak===u.id_zadatak),Z=(u,a)=>{if(u){if(g.value.length>=q){alert("You can only select a maximum of 3 assignments."),T[a.id_zadatak]=!1;return}A.addAssignment(a)}else A.removeAssignment(a)},n=m({isActive:!1,action:null,assignment:{id_zadatak:null}}),l=(u,a)=>{n.value={isActive:!0,action:u,assignment:a}},i=async()=>{const u=n.value.action==="accept"?"odobreno":"odbijeno";h.handleTask(n.value.assignment.id_zadatak,u)&&(G.pushMessage("A\u017Eurirano stanje zadatka","success"),await X.wait(.5),location.reload()),n.value.isActive=!1},S=()=>{n.value.isActive=!1};return(u,a)=>(d(),v(M,null,[_.value?(d(),z(J,{key:0,modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=s=>_.value=s),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:a[1]||(a[1]=s=>o(E).activateLogoutModal(!1))},{default:r(()=>[t(ea,{data:_.value},null,8,["data"]),a[3]||(a[3]=e("br",null,null,-1))]),_:1},8,["modelValue"])):j("",!0),t(J,{modelValue:n.value.isActive,"onUpdate:modelValue":a[2]||(a[2]=s=>n.value.isActive=s),title:"Potvrda akcije","button-label":n.value.action==="accept"?"Prihvati":"Odbij","has-cancel":"",onCancel:S,onConfirm:i},{default:r(()=>[n.value.action==="accept"?(d(),v("div",Sa,[a[4]||(a[4]=U(" Jeste li sigurni da \u017Eelite prihvatiti zadatak - ")),e("b",null,c(n.value.assignment.id_zadatak),1),a[5]||(a[5]=U(" ? "))])):(d(),v("div",Va,[a[6]||(a[6]=U(" Jeste li sigurni da \u017Eelite odbiti zadatak - ")),e("b",null,c(n.value.assignment.id_zadatak),1),a[7]||(a[7]=U(" ? "))]))]),_:1},8,["modelValue","button-label"]),e("table",null,[e("thead",null,[e("tr",null,[$.checkable?(d(),v("th",La)):j("",!0),a[8]||(a[8]=e("th",null,"ID Zadatka",-1)),a[9]||(a[9]=e("th",null,"Kontakt email",-1)),a[10]||(a[10]=e("th",null,"Preferirane tehnologije",-1)),a[11]||(a[11]=e("th",null,"Trajanje (sati)",-1)),a[12]||(a[12]=e("th",null,"Lokacija",-1)),a[13]||(a[13]=e("th",null,null,-1)),a[14]||(a[14]=e("th",null,null,-1)),a[15]||(a[15]=e("th",null,null,-1))])]),e("tbody",null,[(d(!0),v(M,null,D(I.value,s=>(d(),v("tr",{key:s.id_zadatak,class:na({"selected-row":o(b)===s.id_zadatak})},[$.checkable?(d(),z(la,{key:0,value:P(s),disabled:K.value&&!P(s),onChecked:V=>Z(V,s)},null,8,["value","disabled","onChecked"])):j("",!0),e("td",Ua,c(s.id_zadatak),1),e("td",Ea,c(s.poslodavac_email),1),e("td",Fa,c(s.preferirane_tehnologije),1),e("td",Da,c(s.trajanje_sati),1),e("td",Ba,c(s.lokacija),1),e("td",Ia,[t(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(w,{color:"fipu_blue",icon:o(Q),small:"",onClick:V=>_.value=s},null,8,["icon","onClick"])]),_:2},1024)]),e("td",Oa,[t(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(w,{color:"success",icon:o(sa),small:"",onClick:V=>l("accept",s)},null,8,["icon","onClick"])]),_:2},1024)]),e("td",Ra,[t(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(w,{color:"danger",icon:o(ia),small:"",onClick:V=>l("decline",s)},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),e("div",Ka,[t(aa,null,{default:r(()=>[t(x,null,{default:r(()=>[(d(!0),v(M,null,D(R.value,s=>(d(),z(w,{key:s,active:s===k.value,label:s+1,color:s===k.value?"lightDark":"whiteDark",small:"",onClick:V=>k.value=s},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+c(O.value)+" od "+c(N.value),1)]),_:1})])],64))}};const Ga={class:"flex flex-row"},Ha={class:"mb-4"},Ja={__name:"AvailableAssignments",setup($){const f=m("http://fipu-praksa-frontend:3000/poslodavci/novi-zadatak");return(g,b)=>(d(),v("div",null,[o(E).userAuthenticated?(d(),z(_a,{key:0},{default:r(()=>[t(ba,null,{default:r(()=>[t(H,{icon:o(oa),title:"Novi zadaci (u razradi)",main:""},null,8,["icon"]),t(ja,{class:"md:w-1/2",label:"Forma za prijavu novog zadatka"},{default:r(()=>[t(da,{modelValue:f.value,"onUpdate:modelValue":b[0]||(b[0]=y=>f.value=y),"icon-left":o(ua),"icon-right":o(ra),name:"addNewAssignmentLink",readonly:"",copyable:""},null,8,["modelValue","icon-left","icon-right"])]),_:1}),b[2]||(b[2]=e("p",{class:"mb-4"},"U tablici ispod se nalaze novo-prijavljeni zadaci koje je potrebno prou\u010Diti te odobriti kako bi ih studenti mogli prijaviti, ili odbiti ukoliko ne zadovoljavaju definirane zahtjeve.",-1)),t(L,{"has-table":""},{default:r(()=>[t(Za)]),_:1}),o(h).newAssignments.length?j("",!0):(d(),z(L,{key:0},{default:r(()=>[t(pa)]),_:1})),t(H,{class:"mt-8",icon:o(ca),title:"Aktivni (odobreni) zadaci",main:""},null,8,["icon"]),e("div",Ga,[e("div",Ha,[t(ga,{class:"cursor-pointer",left:!1,icon:o(h).availableAssignmentsFilter?o(ma):o(va),color:o(h).availableAssignmentsFilter?"success":"info",label:o(h).availableAssignmentsFilter?"Samo slobodni":"Svi zadaci",onClick:b[1]||(b[1]=y=>o(h).availableAssignmentsFilter=!o(h).availableAssignmentsFilter)},null,8,["icon","color","label"])])]),t(L,{"has-table":""},{default:r(()=>[t(ha)]),_:1}),t(H,{class:"mt-8",icon:o(fa),title:"Odbijeni zadaci",main:""},null,8,["icon"]),t(L,{"has-table":""},{default:r(()=>[t(Pa)]),_:1})]),_:1})]),_:1})):j("",!0)]))}},de=ka(Ja,[["__scopeId","data-v-78ee29b6"]]);export{de as default};
