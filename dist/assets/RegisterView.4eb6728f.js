import{f as z,x as A,y as J,I as D,C as O,r as p,a as H,_ as K,G as Q,J as l,F as a,z as r,u as e,Q as U,P as V,b as Y,A as P,K as Z,T as W,N as X,O as ee}from"./vue.63142468.js";import{c as s,r as f,a as L,n as ae,e as te,d as oe,i as ie,m as se,h as le,b as re,s as ne,u as de,g as _}from"./validators.7431d40e.js";import{c as g,d as G,aY as ue,A as me,aZ as ce,b7 as R,_ as I,G as pe,H as fe,I as _e}from"./BaseButton.e0743500.js";import{f as ge,w as ve,x as xe,b as he,c as we,g as y,U as be}from"./index.ec626852.js";import{_ as N}from"./CardBox.c2cf9add.js";import{_ as je}from"./FormCheckRadio.146aabbc.js";import{_ as v}from"./FormField.ffaab899.js";import{_ as ke}from"./BaseButtons.b1450643.js";import{S as q}from"./maps.a0e2cc42.js";import{f as Me}from"./fipu_unipu.d4f12c80.js";import"./vendor.4c47bd8f.js";import"./LayoutAuthenticated.bda00326.js";import"./SnackBar.cf1f1554.js";import"./SectionTitleLineWithButton.d3b4bb18.js";import"./TableAvailableAssignments.acaba553.js";import"./LoadingOverlay.cdc26130.js";import"./FormFilePicker.53e823f6.js";import"./FormCheckRadioGroup.21123d22.js";const Ve={__name:"SectionSplitRegister",props:{bg:{type:String,required:!0,validator:d=>["blue","pinkRed"].includes(d)}},setup(d){const m=d,o=z(()=>{if(ge.darkMode)return ve;switch(m.bg){case"blue":return xe}return""});return(k,C)=>(A(),J("div",{class:O(["md:px-16 lg:px-20 xl:px-28 2xl:px-36 transition-all duration-300 flex justify-center",o.value])},[D(k.$slots,"default",{cardClass:"shadow-2xl"})],2))}},ye="/register_art.jpg";const ze=d=>(X("data-v-78f944a4"),d=d(),ee(),d),Ae={key:0,class:"flex flex-col justify-center items-center overflow-hidden h-screen md:py-2 xl:py-4 2xl:py-24 md:px-4 || transition-all duration-300"},Ce={class:"flex flex-col md:flex-row flex-shrink h-full rounded-lg overflow-hidden"},Se={class:"flex flex-col md:flex-row flex-shrink h-full || bg-white overflow-y-auto fipu_vertical_scrollbar || transition-all duration-300 px-0 lg:px-6 xl:px-16 2xl:px-28 || xl:gap-4 2xl:gap-8"},Be=["src"],Ue={href:"https://fipu.unipu.hr/",target:"_blank"},Pe=["src"],Le=ze(()=>r("h2",{class:"text-2xl lg:text-3xl 2xl:text-4xl text-fipu_gray font-bold xl:mb-1 mb-2 md:mb-0 2xl:mb-4"},"Molimo unesite va\u0161e podatke",-1)),Ge={class:"md:text-sm lg:text-sm 2xl:text-base mb-2 2xl:mb-4 text-justify"},Re={class:"flex flex-col md:flex-row gap-6 md:gap-2"},Ie={class:"flex flex-col flex-1"},Ne={class:"flex flex-col flex-1"},qe={class:"mt-2 lg:mt-8 flex items-center"},Je={__name:"RegisterView",setup(d){let m=p(!1);const o=H({ime:"",prezime:"",email:"",JMBAG:"",godina_studija:q.GodinaStudijaMappings[0],password:"",passwordConfirm:""}),k=z(()=>o.password),C={ime:{required:s.withMessage("Polje je obavezno",f),croatianAlpha:s.withMessage("Polje smije sadr\u017Eavati samo slova",L)},prezime:{required:s.withMessage("Polje je obavezno",f),croatianAlpha:s.withMessage("Polje smije sadr\u017Eavati samo slova",L)},JMBAG:{required:s.withMessage("Polje je obavezno",f),numeric:s.withMessage("Polje smije sadr\u017Eavati samo brojeve",ae),exactLength:s.withMessage("JMBAG mora sadr\u017Eavati to\u010Dno 10 znamenki",te(10))},godina_studija:{required:s.withMessage("Polje je obavezno",f)},email:{required:s.withMessage("Polje je obavezno",f),email:s.withMessage("Molimo unesite ispravnu e-mail adresu",oe),isUnipuEmail:s.withMessage("Molimo unesite va\u0161u UNIPU e-mail adresu",ie)},password:{required:s.withMessage("Polje je obavezno",f),minLength:s.withMessage("Lozinka mora sadr\u017Eavati minimalno 6 znakova",se(6)),containsAlpha:s.withMessage("Lozinka mora sadr\u017Eavati barem jedno slovo",le),containsNumeric:s.withMessage("Lozinka mora sadr\u017Eavati barem jedan broj",re)},passwordConfirm:{required:s.withMessage("Polje je obavezno",f),sameAs:s.withMessage("Lozinke se ne podudaraju",ne(k))}},u=de(C,o),x=p(!1),S=we();async function $(){if(x.value=!0,!await u.value.$validate()){x.value=!1;return}let t={...o,godina_studija:o.godina_studija.dbLabel};delete t.passwordConfirm;let c=await y.registerStudent(t);if(x.value=!1,c.response&&c.response.status===400)b("warning");else if(c.response&&c.response.status===500)b("danger");else{let i=await y.createInternshipInstance();if(i.status!==500)await y.update_process_instance(c.data.id,i.id),b("success"),await be.wait(2),S.push("/login");else{b("danger");return}}}const n=p(null);let h=p(),w=p();const E=p([]),M=z(()=>E.value.indexOf("outline")>-1);function b(j){switch(j){case"success":n.value.color="success",n.value.icon=_e,n.value.duration=1,h.value="To je to!",w.value=" Uspje\u0161na registracija!";break;case"warning":n.value.color="warning",n.value.icon=fe,h.value="Upozorenje.",w.value=" Ra\u010Dun s ovim podacima ve\u0107 postoji.";break;case"danger":n.value.color="danger",n.value.icon=pe,h.value="Gre\u0161ka!",w.value="Sustav ne radi. Nije do vas, molimo poku\u0161ajte opet ili kontaktirajte voditelja prakse.";break}n.value.show()}const B=p(!1);function F(){B.value=!0}function T(){S.push("/login")}return(j,t)=>{const c=K("NotificationBar");return A(),Q(Ve,{bg:"blue",class:"flex items-start min-h-screen"},{default:l(()=>[a(W,{appear:"","enter-active-class":"animate__animated animate__slideInLeft fast-animation","leave-active-class":"animate__animated animate__slideOutLeft fast-animation",onAfterLeave:T},{default:l(()=>[B.value?Z("",!0):(A(),J("div",Ae,[r("div",Ce,[r("div",Se,[a(N,{"has-table":"",class:"hidden xl:flex justify-center items-center flex-1 bg-opacity-0 grow p-16 xl:px-0 xl:py-16 2xl:py-24 || transition-all duration-300"},{default:l(()=>[r("img",{src:e(ye),alt:"Register graphics",class:"2xl:pr-8 aspect-square max-h-full"},null,8,Be)]),_:1}),a(N,{"has-table":"","vertical-centered":"",class:"flex flex-col flex-shrink flex-1 bg-opacity-0 p-8 sm:p-16 xl:pl-2 xl:px-0 xl:py-24 || transition-all duration-300","is-form":"",onSubmit:U($,["prevent"])},{default:l(()=>[r("a",Ue,[r("img",{src:e(Me),alt:"fipu logo",class:"h-20 xl:h-20 2xl:h-16 ultrawide:h-28 mb-3 2xl:mb-4 object-contain transition-all duration-300"},null,8,Pe)]),Le,r("h2",Ge,[V(" Ve\u0107 imate ra\u010Dun ili \u017Eelite samo pregledati zadatke? Povratak na prijavu "),r("a",{class:"hover-underline-animation cursor-pointer text-fipu_text_blue hover:text-fipu_blue",onClick:t[0]||(t[0]=U(i=>F(),["prevent"]))},"ovdje"),V(". ")]),r("div",Re,[r("div",Ie,[a(v,{label:"Ime"},{default:l(()=>[a(g,{modelValue:o.ime,"onUpdate:modelValue":t[1]||(t[1]=i=>o.ime=i),"icon-left":e(G),error:e(_)(e(u),"ime"),name:"ime",autocomplete:"ime"},null,8,["modelValue","icon-left","error"])]),_:1}),a(v,{label:"Prezime"},{default:l(()=>[a(g,{modelValue:o.prezime,"onUpdate:modelValue":t[2]||(t[2]=i=>o.prezime=i),"icon-left":e(G),error:e(_)(e(u),"prezime"),name:"prezime",autocomplete:"prezime"},null,8,["modelValue","icon-left","error"])]),_:1}),a(v,{label:"JMBAG"},{default:l(()=>[a(g,{modelValue:o.JMBAG,"onUpdate:modelValue":t[3]||(t[3]=i=>o.JMBAG=i),"icon-left":e(ue),error:e(_)(e(u),"JMBAG"),name:"JMBAG",autocomplete:"JMBAG"},null,8,["modelValue","icon-left","error"])]),_:1}),a(v,{label:"UNIPU E-mail"},{default:l(()=>[a(g,{modelValue:o.email,"onUpdate:modelValue":t[4]||(t[4]=i=>o.email=i),"icon-left":e(me),error:e(_)(e(u),"email"),name:"email",autocomplete:"username"},null,8,["modelValue","icon-left","error"])]),_:1})]),r("div",Ne,[a(v,{label:"Godina studija"},{default:l(()=>[a(g,{modelValue:o.godina_studija,"onUpdate:modelValue":t[5]||(t[5]=i=>o.godina_studija=i),"icon-left":e(ce),error:e(_)(e(u),"godina_studija"),options:e(q).GodinaStudijaMappings},null,8,["modelValue","icon-left","error","options"])]),_:1}),a(v,{label:"Lozinka"},{default:l(()=>[a(g,{modelValue:o.password,"onUpdate:modelValue":t[6]||(t[6]=i=>o.password=i),"icon-left":e(R),error:e(_)(e(u),"password"),type:"password",name:"password",autocomplete:"current-password"},null,8,["modelValue","icon-left","error"])]),_:1}),a(v,{label:"Potvrda lozinke"},{default:l(()=>[a(g,{modelValue:o.passwordConfirm,"onUpdate:modelValue":t[7]||(t[7]=i=>o.passwordConfirm=i),"icon-left":e(R),error:e(_)(e(u),"passwordConfirm"),type:"password",name:"passwordConfirm"},null,8,["modelValue","icon-left","error"])]),_:1}),r("div",qe,[a(je,{modelValue:e(m),"onUpdate:modelValue":t[8]||(t[8]=i=>Y(m)?m.value=i:m=i),name:"data_confirmed",type:"checkbox",label:"Potvr\u0111ujem ispravnost podataka.","input-value":!0},null,8,["modelValue"])])])]),a(ke,{class:"space-y-2 mt-4 lg:mt-8"},{default:l(()=>[a(I,{disabled:!e(m)||x.value,type:"submit",color:"fipu_light_blue",label:"Registriraj se",loading:x.value,class:"w-full"},null,8,["disabled","loading"])]),_:1}),a(c,{ref_key:"notificationBar",ref:n,class:"animate__animated animate__fadeInUp mt-4",outline:M.value},{right:l(()=>[a(I,{icon:j.mdiClose,color:M.value?"success":"white",outline:M.value,"rounded-full":"",small:""},null,8,["icon","color","outline"])]),default:l(()=>[r("b",null,P(e(h)),1),V(" "+P(e(w))+" ",1)]),_:1},8,["outline"])]),_:1},8,["onSubmit"])])])]))]),_:1})]),_:1})}}},sa=he(Je,[["__scopeId","data-v-78f944a4"]]);export{sa as default};
