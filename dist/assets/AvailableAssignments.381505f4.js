import{_ as w,m as Q,I as sa,ai as ia,aj as oa,c as da,n as ua,ak as ra,e as ca,Z as ma,al as va,am as fa}from"./BaseButton.028cc894.js";import{e as A,u as W,m as E,_ as aa,U as X,s as G,a as h,b as ka,n as _a}from"./index.943c32fd.js";import{C as J,a as ba}from"./LayoutAuthenticated.6783f5cf.js";import{_ as H,a as pa}from"./SectionTitleLineWithButton.84ca72c6.js";import{_ as L}from"./CardBox.74d9f813.js";import{C as ga}from"./CardBoxComponentEmpty.dd1b0026.js";import{a as ea,_ as ha,b as Aa}from"./TableAvailableAssignments.76b23393.js";import{L as ja,_ as la}from"./LoadingOverlay.9dbae0c6.js";import{_ as x}from"./BaseButtons.e0ebdabe.js";import{r as m,f as p,w as F,q as ta,x as d,y as v,F as t,G as z,J as r,z as e,u as o,K as j,H as M,M as D,C as na,A as c,N as U}from"./vue.f9cfebed.js";import{_ as ya}from"./FormField.ad787479.js";import"./vendor.15896b3d.js";import"./SnackBar.f82320c3.js";const za={key:0},Ca={"data-label":"id_zadatak"},$a={"data-label":"Kontakt email"},wa={"data-label":"Preferirane tehnologije"},xa={"data-label":"Trajanje (sati)"},Ma={"data-label":"Lokacija"},Na={key:1,"data-label":"Max. studenata"},Ta={class:"before:hidden lg:w-1 whitespace-nowrap"},Pa={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Y=3,Sa={__name:"TableRejectedAssignments",props:{checkable:Boolean},setup($){const f=m(null),k=m([]);let g=p(()=>A.checkedAssignments),b=m("");const y=W();async function B(){const n=y.params.id_zadatak;n&&(b.value=n)}F(()=>y.params.id_zadatak,B,{immediate:!0}),ta(async()=>{const n=await A.fetchAvailableAssignments();k.value=n.filter(l=>l.voditelj_odobrio.value=="odbijeno"),A.resetAssignments()});const C=m(5),_=m(0),I=p(()=>k.value.slice(C.value*_.value,C.value*(_.value+1))),N=p(()=>Math.ceil(k.value.length/C.value)),O=p(()=>_.value+1),R=p(()=>{const n=[];for(let l=0;l<N.value;l++)n.push(l);return n}),T=m({}),K=p(()=>g.value.length>=Y);F(g,n=>{n.forEach(l=>{T.value[l.id_zadatak]=!1})});const P=n=>g.value.some(l=>l.id_zadatak===n.id_zadatak),Z=(n,l)=>{if(n){if(g.value.length>=Y){alert("You can only select a maximum of 3 assignments."),T[l.id_zadatak]=!1;return}A.addAssignment(l)}else A.removeAssignment(l)};return(n,l)=>(d(),v(M,null,[t(ja,{"is-active":!k.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]),f.value?(d(),z(J,{key:0,modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=i=>f.value=i),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:l[1]||(l[1]=i=>o(E).activateLogoutModal(!1))},{default:r(()=>[t(ea,{data:f.value},null,8,["data"]),l[2]||(l[2]=e("br",null,null,-1))]),_:1},8,["modelValue"])):j("",!0),e("table",null,[e("thead",null,[e("tr",null,[$.checkable?(d(),v("th",za)):j("",!0),l[3]||(l[3]=e("th",null,"ID Zadatka",-1)),l[4]||(l[4]=e("th",null,"Kontakt email",-1)),l[5]||(l[5]=e("th",null,"Preferirane tehnologije",-1)),l[6]||(l[6]=e("th",null,"Trajanje (sati)",-1)),l[7]||(l[7]=e("th",null,"Lokacija",-1)),l[8]||(l[8]=e("th",null,"Max. mjesta",-1)),l[9]||(l[9]=e("th",null,null,-1))])]),e("tbody",null,[(d(!0),v(M,null,D(I.value,i=>(d(),v("tr",{key:i.id_zadatak,class:na({"selected-row":o(b)===i.id_zadatak})},[$.checkable?(d(),z(la,{key:0,value:P(i),disabled:K.value&&!P(i),onChecked:S=>Z(S,i)},null,8,["value","disabled","onChecked"])):j("",!0),e("td",Ca,c(i.id_zadatak),1),e("td",$a,c(i.poslodavac_email),1),e("td",wa,c(i.preferirane_tehnologije),1),e("td",xa,c(i.trajanje_sati),1),e("td",Ma,c(i.lokacija),1),o(E).userAdmin?(d(),v("td",Na,c(i.broj_studenata),1)):j("",!0),e("td",Ta,[t(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(w,{color:"fipu_blue",icon:o(Q),small:"",onClick:S=>f.value=i},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),e("div",Pa,[t(aa,null,{default:r(()=>[t(x,null,{default:r(()=>[(d(!0),v(M,null,D(R.value,i=>(d(),z(w,{key:i,active:i===_.value,label:i+1,color:i===_.value?"lightDark":"whiteDark",small:"",onClick:S=>_.value=i},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+c(O.value)+" od "+c(N.value),1)]),_:1})])],64))}},Va={key:0,class:"mb-4"},La={key:1,class:"mb-4"},Ua={key:0},Ea={"data-label":"id_zadatak"},Fa={"data-label":"Kontakt email"},Da={"data-label":"Preferirane tehnologije"},Ba={"data-label":"Trajanje (sati)"},Ia={"data-label":"Lokacija"},Oa={class:"before:hidden lg:w-1 whitespace-nowrap"},Ra={class:"before:hidden lg:w-1 whitespace-nowrap"},Ka={class:"before:hidden lg:w-1 whitespace-nowrap"},Za={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},q=3,Ga={__name:"TableNewAssignments",props:{checkable:Boolean},setup($){const f=m(null),k=m([]);let g=p(()=>A.checkedAssignments),b=m("");const y=W();async function B(){const u=y.params.id_zadatak;u&&(b.value=u)}F(()=>y.params.id_zadatak,B,{immediate:!0}),ta(async()=>{const u=await A.fetchAvailableAssignments();k.value=u.filter(a=>a.dostupno_mjesta>0&&a.voditelj_odobrio.value=="u razradi"),X.isArrayEmpty(k.value)?(G.pushMessage("Nema novih zadataka","info"),h.newAssignmentsFound=!1):(G.pushMessage("Prona\u0111eni su novi zadaci, molimo da ih pregledate","info"),h.newAssignmentsFound=!0),h.newAssignments=k.value,A.resetAssignments()});const C=m(5),_=m(0),I=p(()=>k.value.slice(C.value*_.value,C.value*(_.value+1))),N=p(()=>Math.ceil(k.value.length/C.value)),O=p(()=>_.value+1),R=p(()=>{const u=[];for(let a=0;a<N.value;a++)u.push(a);return u}),T=m({}),K=p(()=>g.value.length>=q);F(g,u=>{u.forEach(a=>{T.value[a.id_zadatak]=!1})});const P=u=>g.value.some(a=>a.id_zadatak===u.id_zadatak),Z=(u,a)=>{if(u){if(g.value.length>=q){alert("You can only select a maximum of 3 assignments."),T[a.id_zadatak]=!1;return}A.addAssignment(a)}else A.removeAssignment(a)},n=m({isActive:!1,action:null,assignment:{id_zadatak:null}}),l=(u,a)=>{n.value={isActive:!0,action:u,assignment:a}},i=async()=>{const u=n.value.action==="accept"?"odobreno":"odbijeno";h.handleTask(n.value.assignment.id_zadatak,u)&&(G.pushMessage("A\u017Eurirano stanje zadatka","success"),await X.wait(.5),location.reload()),n.value.isActive=!1},S=()=>{n.value.isActive=!1};return(u,a)=>(d(),v(M,null,[f.value?(d(),z(J,{key:0,modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=s=>f.value=s),"button-label":"Zatvori",button:"fipu_blue","has-cancel:false":"",onCancel:a[1]||(a[1]=s=>o(E).activateLogoutModal(!1))},{default:r(()=>[t(ea,{data:f.value},null,8,["data"]),a[3]||(a[3]=e("br",null,null,-1))]),_:1},8,["modelValue"])):j("",!0),t(J,{modelValue:n.value.isActive,"onUpdate:modelValue":a[2]||(a[2]=s=>n.value.isActive=s),title:"Potvrda akcije","button-label":n.value.action==="accept"?"Prihvati":"Odbij","has-cancel":"",onCancel:S,onConfirm:i},{default:r(()=>[n.value.action==="accept"?(d(),v("div",Va,[a[4]||(a[4]=U(" Jeste li sigurni da \u017Eelite prihvatiti zadatak - ")),e("b",null,c(n.value.assignment.id_zadatak),1),a[5]||(a[5]=U(" ? "))])):(d(),v("div",La,[a[6]||(a[6]=U(" Jeste li sigurni da \u017Eelite odbiti zadatak - ")),e("b",null,c(n.value.assignment.id_zadatak),1),a[7]||(a[7]=U(" ? "))]))]),_:1},8,["modelValue","button-label"]),e("table",null,[e("thead",null,[e("tr",null,[$.checkable?(d(),v("th",Ua)):j("",!0),a[8]||(a[8]=e("th",null,"ID Zadatka",-1)),a[9]||(a[9]=e("th",null,"Kontakt email",-1)),a[10]||(a[10]=e("th",null,"Preferirane tehnologije",-1)),a[11]||(a[11]=e("th",null,"Trajanje (sati)",-1)),a[12]||(a[12]=e("th",null,"Lokacija",-1)),a[13]||(a[13]=e("th",null,null,-1)),a[14]||(a[14]=e("th",null,null,-1)),a[15]||(a[15]=e("th",null,null,-1))])]),e("tbody",null,[(d(!0),v(M,null,D(I.value,s=>(d(),v("tr",{key:s.id_zadatak,class:na({"selected-row":o(b)===s.id_zadatak})},[$.checkable?(d(),z(la,{key:0,value:P(s),disabled:K.value&&!P(s),onChecked:V=>Z(V,s)},null,8,["value","disabled","onChecked"])):j("",!0),e("td",Ea,c(s.id_zadatak),1),e("td",Fa,c(s.poslodavac_email),1),e("td",Da,c(s.preferirane_tehnologije),1),e("td",Ba,c(s.trajanje_sati),1),e("td",Ia,c(s.lokacija),1),e("td",Oa,[t(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(w,{color:"fipu_blue",icon:o(Q),small:"",onClick:V=>f.value=s},null,8,["icon","onClick"])]),_:2},1024)]),e("td",Ra,[t(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(w,{color:"success",icon:o(sa),small:"",onClick:V=>l("accept",s)},null,8,["icon","onClick"])]),_:2},1024)]),e("td",Ka,[t(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[t(w,{color:"danger",icon:o(ia),small:"",onClick:V=>l("decline",s)},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])]),e("div",Za,[t(aa,null,{default:r(()=>[t(x,null,{default:r(()=>[(d(!0),v(M,null,D(R.value,s=>(d(),z(w,{key:s,active:s===_.value,label:s+1,color:s===_.value?"lightDark":"whiteDark",small:"",onClick:V=>_.value=s},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+c(O.value)+" od "+c(N.value),1)]),_:1})])],64))}};const Ha={class:"flex flex-row"},Ja={class:"mb-4"},Xa={__name:"AvailableAssignments",setup($){const f=_a.VITE_FRONTEND_URL,k=m(`${f}/poslodavci/novi-zadatak`);return(g,b)=>(d(),v("div",null,[o(E).userAuthenticated?(d(),z(ba,{key:0},{default:r(()=>[t(pa,null,{default:r(()=>[t(H,{icon:o(oa),title:"Novi zadaci (u razradi)",main:""},null,8,["icon"]),t(ya,{class:"md:w-1/2",label:"Forma za prijavu novog zadatka"},{default:r(()=>[t(da,{modelValue:k.value,"onUpdate:modelValue":b[0]||(b[0]=y=>k.value=y),"icon-left":o(ua),"icon-right":o(ra),name:"addNewAssignmentLink",readonly:"",copyable:""},null,8,["modelValue","icon-left","icon-right"])]),_:1}),b[2]||(b[2]=e("p",{class:"mb-4"},"U tablici ispod se nalaze novo-prijavljeni zadaci koje je potrebno prou\u010Diti te odobriti kako bi ih studenti mogli prijaviti, ili odbiti ukoliko ne zadovoljavaju definirane zahtjeve.",-1)),t(L,{"has-table":""},{default:r(()=>[t(Ga)]),_:1}),o(h).newAssignments.length?j("",!0):(d(),z(L,{key:0},{default:r(()=>[t(ga)]),_:1})),t(H,{class:"mt-8",icon:o(ca),title:"Aktivni (odobreni) zadaci",main:""},null,8,["icon"]),e("div",Ha,[e("div",Ja,[t(ha,{class:"cursor-pointer",left:!1,icon:o(h).availableAssignmentsFilter?o(ma):o(va),color:o(h).availableAssignmentsFilter?"success":"info",label:o(h).availableAssignmentsFilter?"Samo slobodni":"Svi zadaci",onClick:b[1]||(b[1]=y=>o(h).availableAssignmentsFilter=!o(h).availableAssignmentsFilter)},null,8,["icon","color","label"])])]),t(L,{"has-table":""},{default:r(()=>[t(Aa)]),_:1}),t(H,{class:"mt-8",icon:o(fa),title:"Odbijeni zadaci",main:""},null,8,["icon"]),t(L,{"has-table":""},{default:r(()=>[t(Sa)]),_:1})]),_:1})]),_:1})):j("",!0)]))}},ue=ka(Xa,[["__scopeId","data-v-cb90b607"]]);export{ue as default};
