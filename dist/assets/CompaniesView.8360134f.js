import{u as te,m as P,_ as le,U as Y,s as H,a as T,r as re,d as ue}from"./index.eae3abcf.js";import{_ as W,ag as Z,c as B,ah as de,ai as ce,u as _e,l as ve}from"./BaseButton.27532ae3.js";import{_ as ee,a as me}from"./SectionTitleLineWithButton.0f0e8423.js";import{_ as G}from"./CardBox.7c3ad423.js";import{_ as I,C as he,a as be}from"./LayoutAuthenticated.d3ac056d.js";import{L as fe,_ as J}from"./LoadingOverlay.74bda4bd.js";import{_ as E}from"./BaseButtons.b1450643.js";import{r as h,f,w as K,q as Q,x as o,y as n,F as t,z as e,u as i,H as N,M as q,G as U,K as j,A as u,J as _,C as oe,a as pe,P as w}from"./vue.63142468.js";import{c as M,r as F,n as ae,u as ke,g as S}from"./validators.7431d40e.js";import{C as ge}from"./CardBoxComponentEmpty.cb0e404b.js";import{_ as we}from"./FormField.2ed086df.js";import"./vendor.4c47bd8f.js";import"./SnackBar.4cd73fe8.js";const je={key:0},$e=e("th",null,null,-1),ze=e("th",null,"Naziv",-1),Ce=e("th",null,"Web mjesto",-1),Ve=e("th",null,null,-1),xe=[$e,ze,Ce,Ve],Me={key:1},Be=e("th",null,null,-1),Pe=e("th",null,"Naziv",-1),Ne=e("th",null,"Web mjesto",-1),Ue=e("th",null,"Direktor",-1),Ae=e("th",null,"Mati\u010Dni broj",-1),Oe=e("th",null,"OIB",-1),ye=e("th",null,"Adresa",-1),Ie=e("th",null,null,-1),De=[Be,Pe,Ne,Ue,Ae,Oe,ye,Ie],Le={key:0},Fe={key:1,class:"border-b-0 lg:w-6 before:hidden"},Se={key:2},Te={"data-label":"Naziv"},We={"data-label":"Web mjesto"},Ee=["href"],qe={class:"before:hidden lg:w-1 whitespace-nowrap"},Re={key:1},He={key:1,class:"border-b-0 lg:w-6 before:hidden"},Ge={key:2},Je={"data-label":"Naziv"},Ke={"data-label":"Web mjesto"},Qe=["href"],Xe={"data-label":"Direktor"},Ye={"data-label":"Mati\u010Dni broj"},Ze={"data-label":"OIB"},ea={"data-label":"Adresa"},aa={class:"before:hidden lg:w-1 whitespace-nowrap"},ta={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},la={__name:"TableCompanies",props:{checkable:Boolean},setup(D){const v=h(5),b=h(0),A=f(()=>V.value.filter(r=>r.OIB&&r.maticni_broj)),$=f(()=>A.value.slice(v.value*b.value,v.value*(b.value+1))),z=f(()=>Math.ceil(A.value.length/v.value)),s=f(()=>b.value+1),C=f(()=>{const r=[];for(let k=0;k<z.value;k++)r.push(k);return r}),V=h([]);let L=h("");const g=te();async function R(){const r=g.params.naziv;let k=await P.fetchCompanies();V.value=k.data.results,r&&(L.value=r,b.value=p(r))}function p(r){const k=V.value.findIndex(l=>l.naziv===r);return k===-1?0:Math.floor(k/v.value)}K(()=>g.params.naziv,R,{immediate:!0}),Q(async()=>{let r=await P.fetchCompanies();V.value=r.data.results});const x=r=>{window.open(r,"_blank")};return(r,k)=>(o(),n(N,null,[t(fe,{"is-active":!V.value.length,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]),e("table",null,[e("thead",null,[i(P).userAdmin?(o(),n("tr",Me,De)):(o(),n("tr",je,xe))]),i(P).userAdmin?(o(),n("tbody",Re,[(o(!0),n(N,null,q($.value,l=>(o(),n("tr",{key:l.naziv,class:oe({"selected-row":i(L)===l.naziv})},[D.checkable?(o(),U(J,{key:0,"assignment-data":l},null,8,["assignment-data"])):j("",!0),l.logo[0]?(o(),n("td",He,[t(I,{avatar:l.logo[0].url,class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"},null,8,["avatar"])])):(o(),n("td",Ge,[t(I,{avatar:"No-Logo.png",class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"})])),e("td",Je,u(l.naziv),1),e("td",Ke,[e("a",{class:"underline",href:l.web,target:"_blank"},u(l.web),9,Qe)]),e("td",Xe,u(l.direktor),1),e("td",Ye,u(l.maticni_broj),1),e("td",Ze,u(l.OIB),1),e("td",ea,u(l.adresa),1),e("td",aa,[t(E,{type:"justify-start lg:justify-end","no-wrap":""},{default:_(()=>[t(W,{color:"fipu_blue",icon:i(Z),small:"",onClick:O=>x(l.web)},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])):(o(),n("tbody",Le,[(o(!0),n(N,null,q($.value,l=>(o(),n("tr",{key:l.naziv},[D.checkable?(o(),U(J,{key:0,"assignment-data":l},null,8,["assignment-data"])):j("",!0),l.logo[0]?(o(),n("td",Fe,[t(I,{avatar:l.logo[0].url,class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"},null,8,["avatar"])])):(o(),n("td",Se,[t(I,{avatar:"No-Logo.png",class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"})])),e("td",Te,u(l.naziv),1),e("td",We,[e("a",{class:"underline",href:l.web,target:"_blank"},u(l.web),9,Ee)]),e("td",qe,[t(E,{type:"justify-start lg:justify-end","no-wrap":""},{default:_(()=>[t(W,{color:"fipu_blue",icon:i(Z),small:"",onClick:O=>x(l.web)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))]))]),e("div",ta,[t(le,null,{default:_(()=>[t(E,null,{default:_(()=>[(o(!0),n(N,null,q(C.value,l=>(o(),U(W,{key:l,active:l===b.value,label:l+1,color:l===b.value?"lightDark":"whiteDark",small:"",onClick:O=>b.value=l},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+u(s.value)+" od "+u(z.value),1)]),_:1})])],64))}},oa={key:0},sa=e("thead",null,[e("tr",null,[e("th"),e("th",null,"Naziv"),e("th",null,"Web mjesto"),e("th",null,"Direktor"),e("th",null,"Mati\u010Dni broj"),e("th",null,"OIB"),e("th",null,"Adresa"),e("th")])],-1),na={key:1,class:"border-b-0 lg:w-6 before:hidden"},ia={key:2},ra={"data-label":"Naziv"},ua={"data-label":"Web mjesto"},da={"data-label":"Direktor"},ca={"data-label":"Mati\u010Dni broj"},_a={"data-label":"OIB"},va={"data-label":"Adresa"},ma={class:"before:hidden lg:w-1 whitespace-nowrap"},ha={class:"mb-4"},ba={key:0},fa=e("strong",null,"Naziv:",-1),pa=e("br",null,null,-1),ka=e("strong",null,"Web mjesto:",-1),ga=e("br",null,null,-1),wa=e("strong",null,"Direktor:",-1),ja=e("br",null,null,-1),$a=e("strong",null,"Mati\u010Dni broj:",-1),za=e("br",null,null,-1),Ca=e("strong",null,"OIB:",-1),Va=e("br",null,null,-1),xa=e("strong",null,"Adresa:",-1),Ma=e("br",null,null,-1),Ba=e("br",null,null,-1),Pa=e("hr",null,null,-1),Na={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Ua={__name:"TableNewCompanies",props:{checkable:Boolean},setup(D){const v=h([]),b={web:{required:M.withMessage("Polje je obavezno",F)},direktor:{required:M.withMessage("Polje je obavezno",F)},maticni_broj:{required:M.withMessage("Polje je obavezno",F),numeric:M.withMessage("Polje smije sadr\u017Eavati samo brojeve",ae)},OIB:{required:M.withMessage("Polje je obavezno",F),numeric:M.withMessage("Polje smije sadr\u017Eavati samo brojeve",ae)},adresa:{required:M.withMessage("Polje je obavezno",F)}};let A=h("");const $=te();async function z(){const d=$.params.naziv;d&&(A.value=d)}K(()=>$.params.naziv,z,{immediate:!0});const s=h({});Q(async()=>{const c=(await P.fetchCompanies()).data.results.filter(a=>(a.web===""||a.web===null)&&(a.OIB===""||a.OIB===null)&&(a.adresa===""||a.adresa===null)&&(a.maticni_broj===""||a.maticni_broj===null)&&(a.direktor===""||a.direktor===null));Y.isArrayEmpty(c)?(H.pushMessage("Nema novih poduze\u0107a","info"),T.newCompaniesFound=!1):(H.pushMessage("Prona\u0111ena su nova poduze\u0107a, molimo a\u017Eurirajte podatke","info"),T.newCompaniesFound=!0);for(const a of c)s.value[a.id]={naziv:a.naziv,web:a.web,direktor:a.direktor||"",maticni_broj:a.maticni_broj||"",OIB:a.OIB||"",adresa:a.adresa||""};v.value=c});const C=pe({}),V=f(()=>{const d={};for(const c of v.value)d[c.id]=s.value[c.id];return d}),L=()=>{for(const d of v.value)C[d.id]=b};Q(L),K(v,L);const g=ke(C,V),R=h(!1),p=h(null),x=h({isActive:!1});function r(d){p.value=d,x.value.isActive=!0}function k(){l(),x.value.isActive=!1}async function l(){if(R.value=!0,!await g.value.$validate()){R.value=!1;return}const c=s.value[p.value];T.saveUpdatedCompany(c)?(H.pushMessage("Podaci su uspje\u0161no a\u017Eurirani","success"),await Y.wait(1),location.reload()):H.pushMessage("Podaci nisu a\u017Eurirani","error")}const O=h(5),y=h(0),se=f(()=>v.value.slice(O.value*y.value,O.value*(y.value+1))),X=f(()=>Math.ceil(v.value.length/O.value)),ne=f(()=>y.value+1),ie=f(()=>{const d=[];for(let c=0;c<X.value;c++)d.push(c);return d});return(d,c)=>(o(),n(N,null,[i(T).newCompaniesFound?(o(),n("table",oa,[sa,e("tbody",null,[(o(!0),n(N,null,q(se.value,a=>(o(),n("tr",{key:a.naziv,class:oe({"selected-row":i(A)===a.naziv})},[D.checkable?(o(),U(J,{key:0,"assignment-data":a},null,8,["assignment-data"])):j("",!0),a.logo[0]?(o(),n("td",na,[t(I,{avatar:a.logo[0].url,class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"},null,8,["avatar"])])):(o(),n("td",ia,[t(I,{avatar:"No-Logo.png",class:"w-24 h-24 mx-auto lg:w-6 lg:h-6"})])),e("td",ra,[t(B,{modelValue:s.value[a.id].naziv,"onUpdate:modelValue":m=>s.value[a.id].naziv=m,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ua,[t(B,{modelValue:s.value[a.id].web,"onUpdate:modelValue":m=>s.value[a.id].web=m,error:i(S)(i(g),"web")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",da,[t(B,{modelValue:s.value[a.id].direktor,"onUpdate:modelValue":m=>s.value[a.id].direktor=m,error:i(S)(i(g),"direktor")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",ca,[t(B,{modelValue:s.value[a.id].maticni_broj,"onUpdate:modelValue":m=>s.value[a.id].maticni_broj=m,error:i(S)(i(g),"maticni_broj")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",_a,[t(B,{modelValue:s.value[a.id].OIB,"onUpdate:modelValue":m=>s.value[a.id].OIB=m,error:i(S)(i(g),"OIB")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",va,[t(B,{modelValue:s.value[a.id].adresa,"onUpdate:modelValue":m=>s.value[a.id].adresa=m,error:i(S)(i(g),"adresa")},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",ma,[t(E,{type:"justify-start lg:justify-end","no-wrap":""},{default:_(()=>[t(W,{color:"fipu_blue",icon:i(de),small:"",onClick:m=>r(a.id)},null,8,["icon","onClick"])]),_:2},1024)])],2))),128))])])):j("",!0),t(he,{modelValue:x.value.isActive,"onUpdate:modelValue":c[0]||(c[0]=a=>x.value.isActive=a),title:"Potvrda akcije","button-label":"A\u017Euriraj","has-cancel":"",onConfirm:k},{default:_(()=>[e("div",ha,[p.value?(o(),n("div",ba,[fa,w(" "+u(s.value[p.value].naziv),1),pa,ka,w(" "+u(s.value[p.value].web),1),ga,wa,w(" "+u(s.value[p.value].direktor),1),ja,$a,w(" "+u(s.value[p.value].maticni_broj),1),za,Ca,w(" "+u(s.value[p.value].OIB),1),Va,xa,w(" "+u(s.value[p.value].adresa),1),Ma])):j("",!0),Ba,Pa,w(" Molimo provjerite unos te nakon toga potvrdite. ")])]),_:1},8,["modelValue"]),e("div",Na,[t(le,null,{default:_(()=>[t(E,null,{default:_(()=>[(o(!0),n(N,null,q(ie.value,a=>(o(),U(W,{key:a,active:a===y.value,label:a+1,color:a===y.value?"lightDark":"whiteDark",small:"",onClick:m=>y.value=a},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Stranica "+u(ne.value)+" od "+u(X.value),1)]),_:1})])],64))}},Aa={key:0},Oa=e("p",{class:"mb-4"},"U tablici se nalaze poduze\u0107a koja su prijavili zadatke za izvo\u0111enje prakse me\u0111utim jo\u0161 nisu registrirani za provo\u0111enje - potrebno je ru\u010Dno unijeti podatke o poduze\u0107u.",-1),ya=e("p",{class:"mb-4"},"U tablici se nalaze poduze\u0107a koja su registrirana za provo\u0111enje studentske prakse u suradnji s Fakultetom informatike u Puli.",-1),Ia={key:1,class:"mb-4"},Da=e("p",{class:"text-sm md:text-base mb-2"},"Ukoliko ne mo\u017Eete na\u0107i zadatak koji vam se svi\u0111a, javite se poslodavcu, predstavite se i zamolite ih da ispune zadatak putem poveznice ispod.",-1),La={class:"flex flex-wrap items-center text-sm md:text-base"},Ya={__name:"CompaniesView",setup(D){const v=f(()=>P.userAuthenticated),b=f(()=>P.userAdmin),$=h("http://localhost:4000/poslodavci/novi-zadatak");return(z,s)=>(o(),n("div",null,[v.value?(o(),U(be,{key:0},{default:_(()=>[t(me,null,{default:_(()=>[b.value?(o(),n("div",Aa,[t(ee,{icon:i(ce),title:"Novi poslodavci",main:""},null,8,["icon"]),Oa,t(G,{"has-table":""},{default:_(()=>[t(Ua)]),_:1}),i(T).newCompaniesFound?j("",!0):(o(),U(G,{key:0},{default:_(()=>[t(ge)]),_:1}))])):j("",!0),t(ee,{class:"mt-4",icon:i(_e),title:"Svi poslodavci",main:""},null,8,["icon"]),ya,b.value?j("",!0):(o(),n("div",Ia,[Da,t(we,{class:"md:w-1/2",label:"Forma za prijavu novog zadatka"},{default:_(()=>[t(B,{modelValue:$.value,"onUpdate:modelValue":s[0]||(s[0]=C=>$.value=C),"icon-left":z.mdiClipboardCheck,"icon-right":z.mdiContentCopy,name:"addNewAssignmentLink",readonly:"",copyable:""},null,8,["modelValue","icon-left","icon-right"])]),_:1}),e("p",La,[w(" Nakon \u0161to poslodavac ispuni zadatak, prijavite ga u "),e("span",{class:"text-fipu_blue cursor-pointer inline-flex items-center md:ml-1 whitespace-normal",onClick:s[1]||(s[1]=C=>i(re).push("/moja-praksa"))},[t(ue,{path:i(ve),class:"flex-none align-middle",size:18},null,8,["path"]),w(" Moja praksa ")])])])),t(G,{"has-table":""},{default:_(()=>[t(la)]),_:1})]),_:1})]),_:1})):j("",!0)]))}};export{Ya as default};
