import{ba as C,I as x,_ as I,bb as M,bc as B,bd as L}from"./BaseButton.88917cf1.js";import{b as y,a as R,_ as T}from"./SectionTitleLineWithButton.2a6ee0db.js";import{_ as V}from"./CardBox.e754934c.js";import{C as k,y as A}from"./index.3ed05d22.js";import{h as O}from"./moment-setup.c6085169.js";import{_ as U,L as z}from"./LoadingOverlay.48b7e5cf.js";import{_ as D}from"./BaseButtons.b1450643.js";import{x as t,y as n,K as f,z as e,r as b,j as E,q as $,v as F,H as w,M as P,G as _,A as p,u as d,F as l,J as h,a7 as q,P as K}from"./vue.63142468.js";import{a as Z}from"./LayoutAuthenticated.55647b64.js";import"./vendor.4c47bd8f.js";import"./SnackBar.6cbba122.js";const G={key:0,class:"animate-pulse bg-pulse"},H=e("div",{class:"h-4 w-4 rounded bg-gray-300"},null,-1),J=[H],Y=e("td",{class:"animate-pulse bg-pulse"},[e("div",{class:"h-4 w-24 rounded bg-gray-300"})],-1),N=e("td",{class:"animate-pulse bg-pulse flex items-center justify-center"},[e("div",{class:"h-8 w-8 rounded-full bg-gray-300"})],-1),Q=e("td",{class:"animate-pulse bg-pulse"},[e("div",{class:"h-4 w-36 rounded bg-gray-300"})],-1),W=e("td",{class:"animate-pulse bg-pulse"},[e("div",{class:"h-4 w-40 rounded bg-gray-300"})],-1),X=e("td",{class:"animate-pulse bg-pulse"},[e("div",{class:"h-4 w-40 rounded bg-gray-300"})],-1),ee=e("td",{class:"animate-pulse bg-pulse"},[e("div",{class:"flex gap-2"},[e("div",{class:"h-8 w-8 rounded bg-gray-300"}),e("div",{class:"h-8 w-8 rounded bg-gray-300"})])],-1),te={__name:"SkeletonLoaderTable",props:{checkable:Boolean},setup(o){const c=o;return(i,r)=>(t(),n("tr",null,[c.checkable?(t(),n("td",G,J)):f("",!0),Y,N,Q,W,X,ee]))}},ae={key:0},se=e("th",null,"Naziv",-1),le=e("th",null,"Status",-1),ne=e("th",null,"Poruka",-1),oe=e("th",null,"URL",-1),ce=e("th",null,"Zadnja provjera",-1),ie=e("th",null,"Akcije",-1),re={"data-label":"Naziv"},ue={"data-label":"Status",class:"flex items-center justify-center"},de={"data-label":"Poruka"},_e={"data-label":"URL",class:"underline text-fipu_dark_blue"},he=["href"],me={"data-label":"Zadnji put aktivan"},pe={class:"before:hidden lg:w-1 whitespace-nowrap"},fe=5,be={__name:"TableMicroservices",props:{checkable:Boolean,services:{type:Object,required:!0}},setup(o){const c=o;let i,r;const v=b(new Date),s=b(E({...c.services}));$(()=>{const a=async()=>{s.value=await k.checkAllServiceStatuses()};i=setInterval(a,fe*60*1e3),a(),r=setInterval(()=>{v.value=new Date},60*100)}),F(()=>{clearInterval(i),clearInterval(r)});let S=a=>O(a).from(v.value);async function j(a){s.value[a].loading=!0;try{let{[a]:g}=await k.checkServiceStatus(a);s.value={...s.value,[a]:{...s.value[a],...g,status_check_timestamp:new Date}},q(s)}finally{s.value[a].loading=!1}}return(a,g)=>(t(),n("table",null,[e("thead",null,[e("tr",null,[o.checkable?(t(),n("th",ae)):f("",!0),se,le,ne,oe,ce,ie])]),e("tbody",null,[(t(!0),n(w,null,P(s.value,(u,m)=>(t(),n(w,null,[u.loading?(t(),_(te,{key:"skeleton-"+m,checkable:o.checkable},null,8,["checkable"])):(t(),n("tr",{key:m},[o.checkable?(t(),_(U,{key:0})):f("",!0),e("td",re,p(m),1),e("td",ue,[u.status=="OK"?(t(),_(y,{key:0,icon:d(C),color:"success"},null,8,["icon"])):(t(),_(y,{key:1,icon:d(x),color:"danger"},null,8,["icon"]))]),e("td",de,p(u.message),1),e("td",_e,[e("a",{href:u.url,target:"_blank"},p(u.url),9,he)]),e("td",me,p(d(S)(u.status_check_timestamp)),1),e("td",pe,[l(D,{type:"justify-start lg:justify-end","no-wrap":""},{default:h(()=>[l(I,{color:"fipu_blue",icon:d(M),small:"",onClick:ke=>j(m)},null,8,["icon","onClick"])]),_:2},1024)])]))],64))),256))])]))}},ve=e("b",null,"Responsive table.",-1),Le={__name:"MicroservicesView",setup(o){const c=b({}),i=b(!0);return $(async()=>{try{c.value=await k.checkAllServiceStatuses()}catch(r){console.error("Failed to fetch service statuses:",r)}finally{i.value=!1}}),(r,v)=>(t(),n("div",null,[l(Z,null,{default:h(()=>[l(z,{"is-active":i.value,title:"U\u010Ditavanje...",description:"Mo\u017Ee potrajati nekoliko sekundi, molimo ne zatvarajte stranicu."},null,8,["is-active"]),l(R,null,{default:h(()=>[l(T,{icon:d(B),title:"Mikroservisi",main:""},null,8,["icon"]),l(A,{color:"info",icon:d(L)},{default:h(()=>[ve,K(" Collapses on mobile ")]),_:1},8,["icon"]),Object.keys(c.value).length?(t(),_(V,{key:0,"has-table":""},{default:h(()=>[l(be,{services:c.value},null,8,["services"])]),_:1})):f("",!0)]),_:1})]),_:1})]))}};export{Le as default};
